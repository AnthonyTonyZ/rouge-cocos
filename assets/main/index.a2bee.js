System.register("chunks:///_virtual/%E5%87%BB%E6%9D%80%E5%9B%9E%E8%93%9D.ts",["cc","./BuffEffector.ts"],(function(){var e;return{setters:[function(t){e=t.cclegacy},null],execute:function(){e._RF.push({},"36ee82q2XNFAL0WnK6m2wQW","%E5%87%BB%E6%9D%80%E5%9B%9E%E8%93%9D",void 0),e._RF.pop()}}}));

System.register("chunks:///_virtual/%E7%81%BC%E7%83%A7.ts",["cc","./BuffEffector.ts"],(function(){var t;return{setters:[function(c){t=c.cclegacy},null],execute:function(){t._RF.push({},"33babJ2bmpLMpHa2DAEEKce","%E7%81%BC%E7%83%A7",void 0),t._RF.pop()}}}));

System.register("chunks:///_virtual/%E9%87%8E%E6%80%AA%E5%A2%9E%E4%BC%A4.ts",["cc","./BuffEffector.ts"],(function(){var t;return{setters:[function(E){t=E.cclegacy},null],execute:function(){t._RF.push({},"09c70N21gpBTp5mHH3fpe0t","%E9%87%8E%E6%80%AA%E5%A2%9E%E4%BC%A4",void 0),t._RF.pop()}}}));

System.register("chunks:///_virtual/ActionEffector.ts",["cc"],(function(t){var c;return{setters:[function(t){c=t.cclegacy}],execute:function(){c._RF.push({},"b6855hVJxJJlJ2gWfYHPhfl","ActionEffector",void 0);t("ActionEffector",function(){function t(t){this.action=void 0,this.action=t}return t.prototype.apply=function(t){this.action()},t}());c._RF.pop()}}}));

System.register("chunks:///_virtual/ActorActionCon.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Constant.ts","./MathUtil.ts","./ActorProperty.ts","./PhysicsGroup.ts","./Projectile.ts","./AnimationEventListener.ts"],(function(t){var e,i,n,o,r,a,l,s,c,h,u,d,p,A,g,f,C,m,y,I,T,N;return{setters:[function(t){e=t.applyDecoratedDescriptor,i=t.inheritsLoose,n=t.initializerDefineProperty,o=t.assertThisInitialized,r=t.createClass},function(t){a=t.cclegacy,l=t._decorator,s=t.v3,c=t.SkeletalAnimation,h=t.CCFloat,u=t.RigidBody,d=t.Collider,p=t.Animation,A=t.Vec3,g=t.math,f=t.Component},function(t){C=t.Constant},function(t){m=t.MathUtil},function(t){y=t.ActorProperty},function(t){I=t.PhysicsGroup},function(t){T=t.Projectile},function(t){N=t.AnimationEventListener}],execute:function(){var S,v,E,O,b,w,P,k,D;a._RF.push({},"9fa1e5awQ9BorjlrEbFG/Mw","ActorActionCon",void 0);var F=l.ccclass,M=l.property,z=(l.requireComponent,s());t("ActorActionCon",(S=F("ActorActionCon"),v=M(c),E=M(h),O=M(h),S((P=e((w=function(t){function e(){for(var e,i=arguments.length,r=new Array(i),a=0;a<i;a++)r[a]=arguments[a];return e=t.call.apply(t,[this].concat(r))||this,n(e,"skeletalAnimation",P,o(e)),e.rigidbody=null,e.collider=null,e.currState=C.ACTION.Idle,e.destForward=s(),n(e,"linearSpeed",k,o(e)),n(e,"angularSpeed",D,o(e)),e.actorProperty=new y,e}i(e,t);var a=e.prototype;return a.start=function(){var t,e;this.rigidbody=this.node.getComponent(u),this.collider=this.node.getComponent(d),this.skeletalAnimation=this.node.children[0].getComponent(c),this.skeletalAnimation.addComponent(N),null==(t=this.skeletalAnimation)||t.on(p.EventType.FINISHED,this.onAnimationFinished,this),null==(e=this.collider)||e.on("onTriggerEnter",this.onTriggerEnter,this)},a.onDestroy=function(){var t,e;null==(t=this.skeletalAnimation)||t.off(p.EventType.FINISHED,this.onAnimationFinished,this),null==(e=this.collider)||e.off("onTriggerEnter",this.onTriggerEnter,this)},a.onTriggerEnter=function(t){var i;if(I.isHurtable(t.otherCollider.getGroup(),this.collider.getGroup())){var n=null==(i=t.otherCollider.getComponent(T).host)?void 0:i.getComponent(e),o=s();A.subtract(o,t.otherCollider.node.worldPosition,t.selfCollider.node.worldPosition),o.normalize(),this.hurt(n.actorProperty.attack,n,o)}},a.hurt=function(t,e,i){if(this.changeState(C.ACTION.Hit),this.node.emit(C.EVENT_NAME.onHurt,this.actorProperty),this.currState!=C.ACTION.Die){var n;i.multiplyScalar(-1),null==(n=this.rigidbody)||n.applyImpulse(i),this.actorProperty.hp-=t,this.actorProperty.hp<=0&&(this.onDie(),null==e||e.node.emit(C.EVENT_NAME.onEnemyKilled,this))}},a.update=function(t){if(this.currState!=C.ACTION.Die){var e=m.signAngle(this.node.forward,this.destForward,A.UP),i=s(0,20*e,0);switch(this.rigidbody.setAngularVelocity(i),this.currState){case C.ACTION.Run:this.doMove()}}},a.doMove=function(){var t,e=this.linearSpeed*this.destForward.length();z.x=g.clamp(this.node.forward.x,-1,1)*e,z.z=g.clamp(this.node.forward.z,-1,1)*e,null==(t=this.rigidbody)||t.setLinearVelocity(z)},a.stopMove=function(){var t;null==(t=this.rigidbody)||t.setLinearVelocity(A.ZERO)},a.changeState=function(t){var e;t==this.currState&&t!=C.ACTION.Hit||this.currState!=C.ACTION.Die&&(this.currState==C.ACTION.Run&&this.stopMove(),null==(e=this.skeletalAnimation)||e.crossFade(t,.1),this.currState=t)},a.onAnimationFinished=function(t,e){e.name==C.ACTION.Magic&&this.changeState(C.ACTION.Idle),e.name==C.ACTION.Attack&&this.changeState(C.ACTION.Idle),e.name==C.ACTION.Hit&&this.changeState(C.ACTION.Idle)},a.onDie=function(){this.currState!=C.ACTION.Die&&(this.changeState(C.ACTION.Die),this.node.emit(C.EVENT_NAME.onDead,this.node))},a.attack=function(){this.changeState(C.ACTION.Attack)},a.magic=function(){this.changeState(C.ACTION.Magic)},a.respawn=function(){var t;null==(t=this.skeletalAnimation)||t.crossFade(C.ACTION.Idle,.1),this.currState=C.ACTION.Idle},a.hasEffect=function(t){return console.log("查询是否存在",t),!0},a.stun=function(t){console.log("眩晕"+t+"s")},r(e,[{key:"dead",get:function(){return this.currState==C.ACTION.Die}}]),e}(f)).prototype,"skeletalAnimation",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),k=e(w.prototype,"linearSpeed",[E],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 10}}),D=e(w.prototype,"angularSpeed",[O],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 90}}),b=w))||b));a._RF.pop()}}}));

System.register("chunks:///_virtual/ActorCon.ts",["./rollupPluginModLoBabelHelpers.js","cc","./ActorActionCon.ts","./Pools.ts","./Constant.ts","./EnemyController.ts","./ProjectileEmiter.ts","./HeadScaleManager.ts","./CombatTextManager.ts"],(function(e){var t,n,o,a,r,i,c,s,m,l,u,h,g,y,d,f,C;return{setters:[function(e){t=e.createClass},function(e){n=e.cclegacy,o=e._decorator,a=e.resources,r=e.Prefab,i=e.instantiate,c=e.director,s=e.math,m=e.Animation},function(e){l=e.ActorActionCon},function(e){u=e.Pools},function(e){h=e.Constant},function(e){g=e.EnemyController,y=e.EnemyCareer},function(e){d=e.ProjectileEmitter},function(e){f=e.HeadScaleManager},function(e){C=e.CombatTextManager}],execute:function(){var p,v;n._RF.push({},"3a0906SPlRG+7j2ek61yvea","ActorCon",void 0);var P=o.ccclass;e("ActorCon",P("ActorCon")(((v=function(){function e(){this.enemyPools=new u,this.enemyNames=[],this.enemies=[],this._playerActor=null,this.camera=null}var n=e.prototype;return n.init=function(e){var t=this,n=h.DYNAMIC_RESOURCE.Actor.Enemy.Path;a.loadDir(n,(function(){var o=[];a.getDirWithPath(n,r,o);for(var i=0,c=o;i<c.length;i++){var s=c[i],m=a.get(s.path,r);t.createEnemyPool(m)}e()}))},n.createEnemyPool=function(e){var t=this;this.enemyNames.push(e.name),this.enemyPools.newPool(e.name,(function(){var n=i(e);return t.initMonster(n),n.active=!1,c.getScene().addChild(n),n}),1,(function(e){e.removeFromParent()}))},n.clear=function(){this.enemyPools.destroyAll(),this.enemyNames=[],this.enemies=[]},n.createRandomEnemy=function(){var e=this.enemyNames[s.randomRangeInt(0,this.enemyNames.length)],t=this.enemyPools.allocc(e);return t.active=!0,t.getComponent(g).actor.currState=h.ACTION.Idle,t.getComponent(f).reset(),t.getComponent(C).reset(),this.enemies.push(t),t.once(h.EVENT_NAME.onDead,this.onEnemyDead,this),t},n.initMonster=function(e){var t=e.name,n=e.addComponent(g);n.actor=e.addComponent(l),n.attackRange=25,n.fov=30;var o=n.career=y.Range;if(o=n.career=y.Melee,n.attackRange=5,n.fov=25,console.log("初始化怪物"+t,0==n.career?"近战":"远程",o),n.attackInterval=5e3,o==y.Range){console.log("远程配置"+t);var i=e.addComponent(d);i.projectile=a.get("model/projectile/FireBox",r),n.projectileEmitter=i,n.projectileStart=e.getChildByPath(t+"/bow Socket")}var c=e.addComponent(f);console.log("怪物血条"),c.target=e.getChildByName("namePos"),c.camera=this.camera,c.distance=100;var s=e.addComponent(C);return s.target=e.getChildByName("namePos"),s.camera=this.camera,s.distance=100,!0},n.onEnemyDead=function(e){var t=this;console.log("怪物"+e.name+"死亡事件"),e.getComponent(l).skeletalAnimation.once(m.EventType.FINISHED,(function(n,o){t.enemyPools.free(e.name,e);var a=t.enemies.indexOf(e);t.enemies.splice(a,1),e.active=!1,e.getComponent(f).onDestroy(),e.getComponent(C).onDestroy()}),this)},t(e,[{key:"playerActor",get:function(){return this._playerActor},set:function(e){this._playerActor=e}},{key:"randomEnemy",get:function(){return this.enemies[s.randomRangeInt(0,this.enemies.length)]}}],[{key:"instance",get:function(){return null==this._instance&&(this._instance=new e),this._instance}}]),e}())._instance=void 0,p=v))||p);n._RF.pop()}}}));

System.register("chunks:///_virtual/ActorProperty.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(t){var e,i,s;return{setters:[function(t){e=t.createClass},function(t){i=t.cclegacy,s=t.math}],execute:function(){i._RF.push({},"fd231iW1BJO76Lv0r1KmWYh","ActorProperty",void 0);t("ActorProperty",function(){function t(){this.maxHp=99999999,this.hp=this.maxHp,this.maxMp=80,this.mp=this.maxMp,this.attack=10,this.level=1,this.chaseRate=0,this.penetration=0,this.projectileCount=1,this.exp=0,this.maxExp=2,this.skillList=[]}return e(t,[{key:"hpPercent",get:function(){return s.clamp01(this.hp/this.maxHp)}}]),t}());i._RF.pop()}}}));

System.register("chunks:///_virtual/add_attribute.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Skill.ts"],(function(t){var e,i,n;return{setters:[function(t){e=t.inheritsLoose},function(t){i=t.cclegacy},function(t){n=t.Skill}],execute:function(){i._RF.push({},"719a19g1AZPVY3rQ0oTNXYJ","add_attribute",void 0);t("add_attribute",function(t){function i(){return t.apply(this,arguments)||this}e(i,t);var n=i.prototype;return n.isAvailable=function(){return!1},n.use=function(t,e){console.log("add_attribute used",this.name),t[this.propertyString]+=this.propertyValue},i}(n));i._RF.pop()}}}));

System.register("chunks:///_virtual/AnimationEventListener.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(n){var t,e,o,i;return{setters:[function(n){t=n.inheritsLoose},function(n){e=n.cclegacy,o=n._decorator,i=n.Component}],execute:function(){var r;e._RF.push({},"6a855G0TBNEaKK/at0gCn9O","AnimationEventListener",void 0);var a=o.ccclass;n("AnimationEventListener",a("AnimationEventListener")(r=function(n){function e(){return n.apply(this,arguments)||this}t(e,n);var o=e.prototype;return o.onFrameAttackLoose=function(){var n;null==(n=this.node.parent)||n.emit("onFrameAttackLoose")},o.onFrameMagicLoose=function(){var n;null==(n=this.node.parent)||n.emit("onFrameMagicLoose")},o.onFrameAttack=function(){var n;null==(n=this.node.parent)||n.emit("onFrameAttack")},e}(i))||r);e._RF.pop()}}}));

System.register("chunks:///_virtual/AudioManager.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Setting.ts","./Constant.ts"],(function(n){var t,e,i,o,a,s,u,c,r,l,g;return{setters:[function(n){t=n.inheritsLoose,e=n.createClass},function(n){i=n.cclegacy,o=n._decorator,a=n.resources,s=n.Prefab,u=n.instantiate,c=n.AudioSource,r=n.Component},function(n){l=n.Setting},function(n){g=n.Constant}],execute:function(){var f,h;i._RF.push({},"9969bzTgxpGaZb7YO9neKik","AudioManager",void 0);var m=o.ccclass;n("AudioManager",m("AudioManager")(((h=function(n){function i(){for(var t,e=arguments.length,i=new Array(e),o=0;o<e;o++)i[o]=arguments[o];return(t=n.call.apply(n,[this].concat(i))||this).bgm=null,t.sfx=new Map,t}t(i,n);var o=i.prototype;return o.onLoad=function(){i._instance=this,l.instance.on(g.EVENT_NAME.onBgmVolumeChanged,this.onBgmVolumeChanged,this)},o.onDestroy=function(){i._instance=null,l.instance.off(g.EVENT_NAME.onBgmVolumeChanged,this.onBgmVolumeChanged,this)},o.init=function(){this.initSfx(g.DYNAMIC_RESOURCE.audio.SfxHit),this.initSfx(g.DYNAMIC_RESOURCE.audio.SfxShoot),console.log("音效加载完毕")},o.initSfx=function(n){var t=this;a.load(n,s,(function(e,i){var o=u(i);t.node.addChild(o);var a=o.getComponent(c);t.sfx.set(n,a)}))},o.playBgm=function(){if(this.bgm){this.bgm&&this.bgm.stop();var n=this.bgm.node;n.active=!0;var t=n.getComponent(c);t.volume=l.instance.bgmVolume,this.bgm=t}},o.playSfx=function(n){if(this.sfx.has(n)){var t=this.sfx.get(n).node;t.active=!0;var e=t.getComponent(c);e.volume=l.instance.sfxVolume,e.play()}},o.onBgmVolumeChanged=function(){this.bgm&&(this.bgm.volume=l.instance.bgmVolume)},e(i,null,[{key:"instance",get:function(){return null==this._instance&&(this._instance=new i),this._instance}}]),i}(r))._instance=void 0,f=h))||f);i._RF.pop()}}}));

System.register("chunks:///_virtual/brand_e.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Skill.ts"],(function(n){var e,t,r;return{setters:[function(n){e=n.inheritsLoose},function(n){t=n.cclegacy},function(n){r=n.Skill}],execute:function(){t._RF.push({},"7ef0dWOaCRAp4F9WZrTOUhq","brand_e",void 0);n("brand_e",function(n){function t(){return n.apply(this,arguments)||this}return e(t,n),t}(r));t._RF.pop()}}}));

System.register("chunks:///_virtual/brand_passive.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Skill.ts"],(function(n){var e,s,t;return{setters:[function(n){e=n.inheritsLoose},function(n){s=n.cclegacy},function(n){t=n.Skill}],execute:function(){s._RF.push({},"3e661G+THJPE6ajmsmDwB8n","brand_passive",void 0);n("brand_passive",function(n){function s(){return n.apply(this,arguments)||this}return e(s,n),s}(t));s._RF.pop()}}}));

System.register("chunks:///_virtual/brand_q.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Skill.ts","./Constant.ts","./EffectManager.ts"],(function(t){var n,o,e,i,r,l,s;return{setters:[function(t){n=t.inheritsLoose},function(t){o=t.cclegacy,e=t.v3,i=t.Vec3},function(t){r=t.Skill},function(t){l=t.Constant},function(t){s=t.EffectManager}],execute:function(){o._RF.push({},"c5905uyklNPKoV2VzxyPDUT","brand_q",void 0);t("brand_q",function(t){function o(){return t.apply(this,arguments)||this}return n(o,t),o.prototype.use=function(t,n){var o,r,a=this;if(!n)return console.log("敌人已死亡或找不到"),null;if(!this.isAvailable())return console.log("技能正在冷却中！"),null;this.lastUsedTime=Date.now();var c=t.node.name,u=n.name;console.log("brand_q",u);var f=t.node,d=n,g=t.actor.actorProperty,p=t.actor,h=n.getComponent("ActorActionCon");return p.changeState(l.ACTION.Magic),null==(o=s.instance)||o.play(l.DYNAMIC_RESOURCE.Effect.EnergyBall,e(f.worldPosition.x,2.5,f.worldPosition.z),f.forward),null==(r=s.instance)||r.play(l.DYNAMIC_RESOURCE.Effect.Hsgj,d.worldPosition),setTimeout((function(){g.mp-=a.mpCost[a.level-1];console.log(c+" 向 "+u+" 发射了火球，造成 "+50..toFixed(2)+" 魔法伤害");var t=e();i.subtract(t,f.worldPosition,d.worldPosition),t.normalize(),h.hurt(50,f.getComponent("ActorActionCon"),t),h.changeState(l.ACTION.Hit),h.hasEffect("烈焰焚身")&&h.stun(1.5)}),1e3*this.hitMoment),!0},o}(r));o._RF.pop()}}}));

System.register("chunks:///_virtual/brand_r.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Skill.ts"],(function(n){var t,r,e;return{setters:[function(n){t=n.inheritsLoose},function(n){r=n.cclegacy},function(n){e=n.Skill}],execute:function(){r._RF.push({},"591cecVxwVH5agcMnZswBoK","brand_r",void 0);n("brand_r",function(n){function r(){return n.apply(this,arguments)||this}return t(r,n),r}(e));r._RF.pop()}}}));

System.register("chunks:///_virtual/brand_w.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Skill.ts"],(function(n){var t,e,o;return{setters:[function(n){t=n.inheritsLoose},function(n){e=n.cclegacy},function(n){o=n.Skill}],execute:function(){e._RF.push({},"c8ad76qMUNJQKGoVWmwCABQ","brand_w",void 0);n("brand_w",function(n){function e(){return n.apply(this,arguments)||this}return t(e,n),e.prototype.use=function(n,t){console.log("brand_w used",this.name)},e}(o));e._RF.pop()}}}));

System.register("chunks:///_virtual/BuffEffector.ts",["cc"],(function(t){var i;return{setters:[function(t){i=t.cclegacy}],execute:function(){i._RF.push({},"263f47uqLtMl7W8p5prtPmG","BuffEffector",void 0);t("BuffEffector",function(){function t(t,i){this.id=0,this.name="",this.statusSlot=!1,this.iconIndex=0,this.description="",this.priority=0,this.type=void 0,this.buffType=void 0,this.target=void 0,this.duration=0,this.message1="",this.property="",this.propertyValue=0,this.buffType=t,this.duration=i}return t.prototype.apply=function(t){t.addBuff&&t.addBuff(this.buffType,this.duration)},t}());i._RF.pop()}}}));

System.register("chunks:///_virtual/BulletEffector.ts",["cc"],(function(t){var e;return{setters:[function(t){e=t.cclegacy}],execute:function(){e._RF.push({},"fc56de47K1JMI7dDkkKmEDt","BulletEffector",void 0);t("BulletEffector",function(){function t(t){this.id=0,this.name="",this.critical=!0,this.elementId=0,this.formula="",this.type=0,this.variance=0,this.id=t}return t.prototype.apply=function(t){t.takeDamage&&t.takeDamage(this.id)},t}());e._RF.pop()}}}));

System.register("chunks:///_virtual/CombatTextManager.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Constant.ts","./ResourceUtil.ts"],(function(t){var o,e,n,i,a,s,r,c,l,u,p,g,h,m,d,f;return{setters:[function(t){o=t.applyDecoratedDescriptor,e=t.inheritsLoose,n=t.initializerDefineProperty,i=t.assertThisInitialized},function(t){a=t.cclegacy,s=t._decorator,r=t.Node,c=t.Camera,l=t.Vec3,u=t.director,p=t.Prefab,g=t.instantiate,h=t.tween,m=t.Component},function(t){d=t.Constant},function(t){f=t.ResourceUtil}],execute:function(){var C,v,b,y,_,P,T,w;a._RF.push({},"13307K7yoBHBYnRigkazFNz","CombatTextManager",void 0);var D=s.ccclass,M=s.property;t("CombatTextManager",(C=D("CombatTextManager"),v=M(r),b=M(c),C((P=o((_=function(t){function o(){for(var o,e=arguments.length,a=new Array(e),s=0;s<e;s++)a[s]=arguments[s];return o=t.call.apply(t,[this].concat(a))||this,n(o,"target",P,i(o)),n(o,"camera",T,i(o)),n(o,"distance",w,i(o)),o.genComp=void 0,o.uiNode=void 0,o._lastWPos=new l,o._pos=new l,o.loopCount=0,o.maxLoops=5,o.scale=void 0,o}e(o,t);var a=o.prototype;return a.onLoad=function(){var t=this;console.log("CombatTextManager,onLoad"),this.uiNode=u.getScene().getChildByPath("UIRoot/UIGame"),f.loadRes(d.UI_NAME.UI_COMBAT_TEXT,p,(function(o,e){t.genComp=g(e),t.genComp.active=!0,t.uiNode.addChild(t.genComp),t.schedule((function(){t.startActions(t.genComp)}),6,15,0)})),this.genComp},a.update=function(){this.convert3DTo2DPosition()},a.startActions=function(t){var o=this;console.log("startActions");var e=t.getPosition(),n=t.getPosition();n.y+=50,this.scale&&t.setScale(this.scale),h(t).to(.6,{position:n,scale:new l(0,0,0)}).to(.3,{position:e}).call((function(){console.log("动画循环完成一次","缓动参数\n                 1:起始位置 "+e+",2:转换位置 "+n+",3:次数 "+o.loopCount+"\n                 4:时间戳 "+Date.now()+",5:缓动对象 "+o.target.parent.name+"\n                 // 6:缩放比例 "+o.scale+",7:解析只执行一次的原因 "+t+"\n                 "),o.loopCount++})).start()},a.convert3DTo2DPosition=function(){console.log("convert3DTo2DPosition");var t=this.target.worldPosition;this._lastWPos.set(t);var o=this.camera;o._camera.update(),o.convertToUINode(t,this.uiNode,this._pos),this.genComp.setPosition(this._pos),l.transformMat4(this._pos,this.target.worldPosition,o._camera.matView);var e=this.distance/Math.abs(this._pos.z),n=Math.floor(100*e)/100;this.genComp.setScale(n,n,1),this.scale=this.genComp.getScale()},a.onDestroy=function(){console.log("CombatTextManager,onDestroy"),this.genComp.active=!1},a.reset=function(){this.genComp&&(this.genComp.active=!0)},o}(m)).prototype,"target",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),T=o(_.prototype,"camera",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),w=o(_.prototype,"distance",[M],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),y=_))||y));a._RF.pop()}}}));

System.register("chunks:///_virtual/Constant.ts",["cc"],(function(a){var e;return{setters:[function(a){e=a.cclegacy}],execute:function(){e._RF.push({},"991aaTjNRxA8KkdtiCazhO/","Constant",void 0);var t=a("Constant",(function(){}));t.LOCAL_CACHE={PLAYER:"player",SETTINGS:"settings",DATA_VERSION:"dataVersion",ACCOUNT:"account",HISTORY:"history",BAG:"bag"},t.PANEL_NAME={START_GAME:"prefab/UIStart",SELECT_GAME:"UILobby",TRANSITION:"fight/transitionPanel",TRANSITION_BG:"fight/transitionBgPanel"},t.UI_NAME={UI_HP_BAR:"ui/prefab/common/UIHpBar",UI_COMBAT_TEXT:"ui/prefab/common/UICombatTextFX"},t.DYNAMIC_RESOURCE={directory:["effect","audio","actor","ui"],Actor:{Enemy:{Path:"model/enemies"}},Effect:{Path:"effect/",EffExplore:"effect/EffExplore",EnergyBall:"effect/EnergyBall",Hsgj:"effect/hsgj"},audio:{Bgm:"audio/prefab/Bgm",SfxHit:"audio/sfx/SfxHit",SfxShoot:"audio/sfx/SfxShoot"},skill:{data:{damage:"data/damage",skill:"data/skill",state:"data/state"},ref:{SkillDamage:"data/ref_skill_damage",SkillState:"data/ref_skill_state",StateDamage:"data/ref_state_damage"}}},t.EVENT_NAME={onGame321:"onGame321",onProjectileDead:"onProjectileDead",onEnemyKilled:"onKilled",onExpGain:"onExpGain",onPlayerUpgrade:"onPlayerUpgrade",onHurt:"onHurt",onDead:"onDead",updatePlayerInfo:"updatePlayerInfo",onBgmVolumeChanged:"onBgmVolumeChanged"},t.ACTION={Idle:"idle",Attack:"attack",Hit:"hit",Run:"run",Die:"die",Magic:"magic"},t.DIALOG_DEF={UISkillUpgrade:"UISkillUpgrade"},t.SCENE_NAME={FIGHT:"fight",SLECT:"select"},t.I18_LANGUAGE={ENGLISH:"en",CHINESE:"zh"},e._RF.pop()}}}));

System.register("chunks:///_virtual/debug-view-runtime-control.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(t){var e,o,i,n,s,l,r,a,g,h,p,c,C,d,m,u,L;return{setters:[function(t){e=t.applyDecoratedDescriptor,o=t.inheritsLoose,i=t.initializerDefineProperty,n=t.assertThisInitialized},function(t){s=t.cclegacy,l=t._decorator,r=t.Node,a=t.Color,g=t.Canvas,h=t.UITransform,p=t.instantiate,c=t.Label,C=t.RichText,d=t.Toggle,m=t.Button,u=t.director,L=t.Component}],execute:function(){var f,M,b,v,T,S,x,E,I;s._RF.push({},"b2bd1+njXxJxaFY3ymm06WU","debug-view-runtime-control",void 0);var A=l.ccclass,y=l.property;t("DebugViewRuntimeControl",(f=A("internal.DebugViewRuntimeControl"),M=y(r),b=y(r),v=y(r),f((x=e((S=function(t){function e(){for(var e,o=arguments.length,s=new Array(o),l=0;l<o;l++)s[l]=arguments[l];return e=t.call.apply(t,[this].concat(s))||this,i(e,"compositeModeToggle",x,n(e)),i(e,"singleModeToggle",E,n(e)),i(e,"EnableAllCompositeModeButton",I,n(e)),e._single=0,e.strSingle=["No Single Debug","Vertex Color","Vertex Normal","Vertex Tangent","World Position","Vertex Mirror","Face Side","UV0","UV1","UV Lightmap","Project Depth","Linear Depth","Fragment Normal","Fragment Tangent","Fragment Binormal","Base Color","Diffuse Color","Specular Color","Transparency","Metallic","Roughness","Specular Intensity","IOR","Direct Diffuse","Direct Specular","Direct All","Env Diffuse","Env Specular","Env All","Emissive","Light Map","Shadow","AO","Fresnel","Direct Transmit Diffuse","Direct Transmit Specular","Env Transmit Diffuse","Env Transmit Specular","Transmit All","Direct Internal Specular","Env Internal Specular","Internal All","Fog"],e.strComposite=["Direct Diffuse","Direct Specular","Env Diffuse","Env Specular","Emissive","Light Map","Shadow","AO","Normal Map","Fog","Tone Mapping","Gamma Correction","Fresnel","Transmit Diffuse","Transmit Specular","Internal Specular","TT"],e.strMisc=["CSM Layer Coloration","Lighting With Albedo"],e.compositeModeToggleList=[],e.singleModeToggleList=[],e.miscModeToggleList=[],e.textComponentList=[],e.labelComponentList=[],e.textContentList=[],e.hideButtonLabel=void 0,e._currentColorIndex=0,e.strColor=["<color=#ffffff>","<color=#000000>","<color=#ff0000>","<color=#00ff00>","<color=#0000ff>"],e.color=[a.WHITE,a.BLACK,a.RED,a.GREEN,a.BLUE],e}o(e,t);var s=e.prototype;return s.start=function(){if(this.node.parent.getComponent(g)){var t=this.node.parent.getComponent(h),e=.5*t.width,o=.5*t.height,i=.1*e-e,n=o-.1*o,s=this.node.getChildByName("MiscMode"),l=p(s);l.parent=this.node,l.name="Buttons";var r=p(s);r.parent=this.node,r.name="Titles";for(var u=0;u<2;u++){var L=p(this.EnableAllCompositeModeButton.getChildByName("Label"));L.setPosition(i+(u>0?450:150),n,0),L.setScale(.75,.75,.75),L.parent=r;var f=L.getComponent(c);f.string=u?"----------Composite Mode----------":"----------Single Mode----------",f.color=a.WHITE,f.overflow=0,this.labelComponentList[this.labelComponentList.length]=f}n-=20;for(var M=0,b=0;b<this.strSingle.length;b++,M++){b===this.strSingle.length>>1&&(i+=200,M=0);var v=b?p(this.singleModeToggle):this.singleModeToggle;v.setPosition(i,n-20*M,0),v.setScale(.5,.5,.5),v.parent=this.singleModeToggle.parent;var T=v.getComponentInChildren(C);T.string=this.strSingle[b],this.textComponentList[this.textComponentList.length]=T,this.textContentList[this.textContentList.length]=T.string,v.on(d.EventType.TOGGLE,this.toggleSingleMode,this),this.singleModeToggleList[b]=v}i+=200,this.EnableAllCompositeModeButton.setPosition(i+15,n,0),this.EnableAllCompositeModeButton.setScale(.5,.5,.5),this.EnableAllCompositeModeButton.on(m.EventType.CLICK,this.enableAllCompositeMode,this),this.EnableAllCompositeModeButton.parent=l;var S=this.EnableAllCompositeModeButton.getComponentInChildren(c);this.labelComponentList[this.labelComponentList.length]=S;var x=p(this.EnableAllCompositeModeButton);x.setPosition(i+90,n,0),x.setScale(.5,.5,.5),x.on(m.EventType.CLICK,this.changeTextColor,this),x.parent=l,(S=x.getComponentInChildren(c)).string="TextColor",this.labelComponentList[this.labelComponentList.length]=S;var E=p(this.EnableAllCompositeModeButton);E.setPosition(i+200,n,0),E.setScale(.5,.5,.5),E.on(m.EventType.CLICK,this.hideUI,this),E.parent=this.node.parent,(S=E.getComponentInChildren(c)).string="Hide UI",this.labelComponentList[this.labelComponentList.length]=S,this.hideButtonLabel=S,n-=40;for(var I=0;I<this.strMisc.length;I++){var A=p(this.compositeModeToggle);A.setPosition(i,n-20*I,0),A.setScale(.5,.5,.5),A.parent=s;var y=A.getComponentInChildren(C);y.string=this.strMisc[I],this.textComponentList[this.textComponentList.length]=y,this.textContentList[this.textContentList.length]=y.string,A.getComponent(d).isChecked=!!I,A.on(d.EventType.TOGGLE,I?this.toggleLightingWithAlbedo:this.toggleCSMColoration,this),this.miscModeToggleList[I]=A}n-=150;for(var D=0;D<this.strComposite.length;D++){var B=D?p(this.compositeModeToggle):this.compositeModeToggle;B.setPosition(i,n-20*D,0),B.setScale(.5,.5,.5),B.parent=this.compositeModeToggle.parent;var w=B.getComponentInChildren(C);w.string=this.strComposite[D],this.textComponentList[this.textComponentList.length]=w,this.textContentList[this.textContentList.length]=w.string,B.on(d.EventType.TOGGLE,this.toggleCompositeMode,this),this.compositeModeToggleList[D]=B}}else console.error("debug-view-runtime-control should be child of Canvas")},s.isTextMatched=function(t,e){var o=new String(t),i=o.search(">");return-1===i?t===e:(o=(o=o.substr(i+1)).substr(0,o.search("<")))===e},s.toggleSingleMode=function(t){for(var e=u.root.debugView,o=t.getComponentInChildren(C),i=0;i<this.strSingle.length;i++)this.isTextMatched(o.string,this.strSingle[i])&&(e.singleMode=i)},s.toggleCompositeMode=function(t){for(var e=u.root.debugView,o=t.getComponentInChildren(C),i=0;i<this.strComposite.length;i++)this.isTextMatched(o.string,this.strComposite[i])&&e.enableCompositeMode(i,t.isChecked)},s.toggleLightingWithAlbedo=function(t){u.root.debugView.lightingWithAlbedo=t.isChecked},s.toggleCSMColoration=function(t){u.root.debugView.csmLayerColoration=t.isChecked},s.enableAllCompositeMode=function(t){var e=u.root.debugView;e.enableAllCompositeMode(!0);for(var o=0;o<this.compositeModeToggleList.length;o++){this.compositeModeToggleList[o].getComponent(d).isChecked=!0}var i=this.miscModeToggleList[0].getComponent(d);i.isChecked=!1,e.csmLayerColoration=!1,(i=this.miscModeToggleList[1].getComponent(d)).isChecked=!0,e.lightingWithAlbedo=!0},s.hideUI=function(t){var e=this.node.getChildByName("Titles"),o=!e.active;this.singleModeToggleList[0].parent.active=o,this.miscModeToggleList[0].parent.active=o,this.compositeModeToggleList[0].parent.active=o,this.EnableAllCompositeModeButton.parent.active=o,e.active=o,this.hideButtonLabel.string=o?"Hide UI":"Show UI"},s.changeTextColor=function(t){this._currentColorIndex++,this._currentColorIndex>=this.strColor.length&&(this._currentColorIndex=0);for(var e=0;e<this.textComponentList.length;e++)this.textComponentList[e].string=this.strColor[this._currentColorIndex]+this.textContentList[e]+"</color>";for(var o=0;o<this.labelComponentList.length;o++)this.labelComponentList[o].color=this.color[this._currentColorIndex]},s.onLoad=function(){},s.update=function(t){},e}(L)).prototype,"compositeModeToggle",[M],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),E=e(S.prototype,"singleModeToggle",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),I=e(S.prototype,"EnableAllCompositeModeButton",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),T=S))||T));s._RF.pop()}}}));

System.register("chunks:///_virtual/demoSkill.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Skill.ts","./Constant.ts","./EffectManager.ts"],(function(o){var t,n,e,i,l,r,s;return{setters:[function(o){t=o.inheritsLoose},function(o){n=o.cclegacy,e=o.v3,i=o.Vec3},function(o){l=o.Skill},function(o){r=o.Constant},function(o){s=o.EffectManager}],execute:function(){n._RF.push({},"b89aetRTDFNOLVR0K4mGyJX","demoSkill",void 0);o("demoSkill",function(o){function n(){return o.apply(this,arguments)||this}return t(n,o),n.prototype.use=function(o,t){var n,l,a=this;if(!t)return console.log("敌人已死亡或找不到"),null;if(!this.isAvailable())return console.log("技能正在冷却中！"),null;this.lastUsedTime=Date.now();var c=o.node.name,u=t.name;console.log("brand_q",u);var f=o.node,d=t,g=o.actor.actorProperty,p=o.actor,m=t.getComponent("ActorActionCon");return p.changeState(r.ACTION.Magic),null==(n=s.instance)||n.play(r.DYNAMIC_RESOURCE.Effect.EnergyBall,e(f.worldPosition.x,5,f.worldPosition.z),f.forward),null==(l=s.instance)||l.play(r.DYNAMIC_RESOURCE.Effect.Hsgj,d.worldPosition),setTimeout((function(){var t=a.level-1;g.mp-=a.mpCost[t];var n=a.damageBase[t]+(o.ap||0)*a.ratio;console.log(c+" 向 "+u+" 发射了火球，造成 "+n.toFixed(2)+" 魔法伤害");var l=e();console.log(f.worldPosition,d.worldPosition),i.subtract(l,f.worldPosition,d.worldPosition),l.normalize(),m.hurt(n,f.getComponent("ActorActionCon"),l),m.changeState(r.ACTION.Hit),m.hasEffect("烈焰焚身")&&(m.stun(1.5),console.log(u+" 被晕眩了1.5秒"))}),1e3*this.hitMoment),!0},n}(l));n._RF.pop()}}}));

System.register("chunks:///_virtual/EffectManager.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Constant.ts","./Pools.ts","./MathUtil.ts"],(function(t){var n,e,o,r,a,c,i,f,s,l,u,E,d,p;return{setters:[function(t){n=t.createClass},function(t){e=t.cclegacy,o=t._decorator,r=t.resources,a=t.Prefab,c=t.instantiate,i=t.director,f=t.Vec3,s=t.math,l=t.ParticleSystem,u=t.v3},function(t){E=t.Constant},function(t){d=t.Pools},function(t){p=t.MathUtil}],execute:function(){var v,h;e._RF.push({},"14df6W2BbxFIoL3PM0UBsfn","EffectManager",void 0);var C=o.ccclass;t("EffectManager",C("EffectManager")(((h=function(){function t(){this.pools=new d,this.tempForward=u()}var e=t.prototype;return e.init=function(){var t=this;r.loadDir(E.DYNAMIC_RESOURCE.Effect.Path,(function(){var n=r.get(E.DYNAMIC_RESOURCE.Effect.EffExplore,a);t.pools.newPool(E.DYNAMIC_RESOURCE.Effect.EffExplore,(function(){return c(n)}),50,(function(t){t.removeFromParent(),t.destroy()}));var e=r.get(E.DYNAMIC_RESOURCE.Effect.EnergyBall,a);t.pools.newPool(E.DYNAMIC_RESOURCE.Effect.EnergyBall,(function(){return c(e)}),50,(function(t){t.removeFromParent(),t.destroy()}));var o=r.get(E.DYNAMIC_RESOURCE.Effect.Hsgj,a);t.pools.newPool(E.DYNAMIC_RESOURCE.Effect.Hsgj,(function(){return c(o)}),50,(function(t){t.removeFromParent(),t.destroy()}))}))},e.destory=function(){t._instance=null,this.pools.destroyAll()},e.play=function(t,n,e){var o=this.pools.pool(t);this.playEffect(o,n,e)},e.playEffect=function(t,n,e){var o,r=t.alloc();null==(o=i.getScene())||o.addChild(r),r.worldPosition=n,r.active=!0,e&&(p.rotateAround(this.tempForward,e,f.UP,s.toRadian(0)),r.forward=this.tempForward.clone());var a=r.getComponent(l);a.scheduleOnce((function(){r.active=!1,t.free(r)}),a.duration),a.play()},n(t,null,[{key:"instance",get:function(){return null==this._instance&&(this._instance=new t),this._instance}}]),t}())._instance=void 0,v=h))||v);e._RF.pop()}}}));

System.register("chunks:///_virtual/Effector.ts",["cc"],(function(){var e;return{setters:[function(t){e=t.cclegacy}],execute:function(){e._RF.push({},"ae907WYDDlNU44+Dv74E7l7","Effector",void 0),e._RF.pop()}}}));

System.register("chunks:///_virtual/EnemyController.ts",["./rollupPluginModLoBabelHelpers.js","cc","./ActorCon.ts","./ActorActionCon.ts","./Constant.ts","./TimeUtil.ts"],(function(t){var e,r,o,i,a,n,c,s,l,h,u,d,f,g,p,m,y,A,C,b;return{setters:[function(t){e=t.applyDecoratedDescriptor,r=t.inheritsLoose,o=t.initializerDefineProperty,i=t.assertThisInitialized},function(t){a=t.cclegacy,n=t._decorator,c=t.v3,s=t.ccenum,l=t.CCFloat,h=t.Node,u=t.CCInteger,d=t.macro,f=t.Collider,g=t.game,p=t.Vec3,m=t.Component},function(t){y=t.ActorCon},function(t){A=t.ActorActionCon},function(t){C=t.Constant},function(t){b=t.TimeUtil}],execute:function(){var v,w,I,k,T,P,S,z,R,F,N,E,D,O,j,x;a._RF.push({},"4d902Kv5pFIZaYtgqWS/9Ho","EnemyController",void 0);var M=n.ccclass,_=n.property,q=n.requireComponent,H=c(),L=function(){};L.Chase="chase",L.Attack="attack",L.Idle="idle";var U=t("EnemyCareer",function(t){return t[t.Melee=0]="Melee",t[t.Range=1]="Range",t}({}));s(U);t("EnemyController",(v=M("EnemyController"),w=q(A),I=_(l),k=_(l),T=_({type:U}),P=_(A),S=_(h),z=_(u),v(R=w((N=e((F=function(t){function e(){for(var e,r=arguments.length,a=new Array(r),n=0;n<r;n++)a[n]=arguments[n];return(e=t.call.apply(t,[this].concat(a))||this).actor=null,o(e,"attackRange",N,i(e)),o(e,"fov",E,i(e)),o(e,"career",D,i(e)),o(e,"target",O,i(e)),e.aiType=L.Chase,e.projectileEmitter=void 0,o(e,"projectileStart",j,i(e)),o(e,"attackInterval",x,i(e)),e.lastAttackTime=0,e}r(e,t);var a=e.prototype;return a.start=function(){this.target=y.instance.playerActor,this.schedule(this.executeAI,1,d.REPEAT_FOREVER,1),this.node.on("onFrameAttack",this.onFrameAttack,this)},a.onDestroy=function(){this.unschedule(this.executeAI);this.node.getComponent(f);this.node.off("onFrameAttack",this.onFrameAttack,this)},a.executeAI=function(){if(this.actor.currState!=C.ACTION.Die)if(null!=this.target){if(this.actor.currState==C.ACTION.Idle||this.actor.currState==C.ACTION.Run){var t=g.totalTime-this.lastAttackTime>=this.attackInterval;if(this.target.currState==C.ACTION.Die||!t)return this.aiType=L.Idle,void this.actor.changeState(L.Idle);var e=p.distance(this.node.worldPosition,this.target.node.worldPosition);return e>this.fov?(this.aiType=L.Idle,void this.actor.changeState(L.Idle)):e<=this.fov&&e>=this.attackRange?(this.aiType=L.Chase,this.actor.changeState(C.ACTION.Run),p.subtract(H,this.target.node.worldPosition,this.node.worldPosition),H.normalize(),void this.actor.destForward.set(H.x,0,H.z)):void(this.actor.currState!=C.ACTION.Attack&&t&&(console.log("Magician:攻击模式",b.formatDate(Date.now())),this.aiType=L.Attack,p.subtract(H,this.target.node.worldPosition,this.node.worldPosition),H.normalize(),this.actor.destForward.set(H.x,0,H.z),this.actor.node.forward.set(H.x,0,H.z),this.actor.changeState(C.ACTION.Attack),this.lastAttackTime=g.totalTime))}}else console.log("找不到目标");else console.log("找不到目标")},a.onFrameAttack=function(){if(this.target)if(this.career==U.Melee){var t=c();if(p.subtract(t,this.target.node.worldPosition,this.node.worldPosition),p.angle(this.node.forward,t)<.5*Math.PI)t.length()<this.attackRange&&this.target.hurt(this.actor.actorProperty.attack,this.actor,t)}else{var e=this.projectileEmitter.create();e.node.worldPosition=this.projectileStart.worldPosition,e.target=this.target.node,e.host=this.node,p.subtract(H,this.target.node.worldPosition,this.projectileStart.worldPosition),H.y=Number(this.target.node.getComponent(f).center.y)*Number(this.target.node.scale.y)-Number(this.node.getComponent(f).center.y)*Number(this.node.scale.y)*2,H.normalize(),e.node.forward=H,e.fire()}},e}(m)).prototype,"attackRange",[I],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return.5}}),E=e(F.prototype,"fov",[k],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return.5}}),D=e(F.prototype,"career",[T],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return U.Melee}}),O=e(F.prototype,"target",[P],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),j=e(F.prototype,"projectileStart",[S],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),x=e(F.prototype,"attackInterval",[z],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 5e3}}),R=F))||R)||R));a._RF.pop()}}}));

System.register("chunks:///_virtual/EventListener.ts",["cc"],(function(r){var e,n;return{setters:[function(r){e=r.cclegacy,n=r._decorator}],execute:function(){var t,a;e._RF.push({},"34d82EHVCpLwLRB5fkAMbPp","EventListener",void 0);var s=n.ccclass;r("EventListener",s("EventListener")(((a=function(){function r(){}return r.on=function(e,n,t){var a={handler:n,target:t},s=r._handlers[e];s||(s=[],r._handlers[e]=s);for(var c=0;c<s.length;c++)if(!s[c])return s[c]=a,c;return s.push(a),s.length},r.off=function(e,n,t){var a=r._handlers[e];if(a)for(var s=0;s<a.length;s++){var c=a[s];if(c.handler===n&&(!t||t===c.target)){a.splice(s,1);break}}},r.dispatchEvent=function(e){for(var n=arguments.length,t=new Array(n>1?n-1:0),a=1;a<n;a++)t[a-1]=arguments[a];var s,c=r._handlers[e],i=[];for(s=1;s<arguments.length;s++)i.push(arguments[s]);if(c)for(s=0;s<c.length;s++){var f=c[s];f.handler&&f.handler.apply(f.target,i)}},r}())._handlers={},t=a))||t);e._RF.pop()}}}));

System.register("chunks:///_virtual/FollowCameraManager.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(t){var e,r,i,o,a,n,l,c,s,u,p;return{setters:[function(t){e=t.applyDecoratedDescriptor,r=t.inheritsLoose,i=t.initializerDefineProperty,o=t.assertThisInitialized},function(t){a=t.cclegacy,n=t._decorator,l=t.v3,c=t.Node,s=t.Camera,u=t.Vec3,p=t.Component}],execute:function(){var d,f,g,h,m,w,y;a._RF.push({},"46e27vCCJFDzoKrIU3fNSHq","FollowCameraManager",void 0);var v=n.ccclass,b=n.property,C=l();t("FollowCameraManager",(d=v("FollowCameraManager"),f=b(c),g=b(s),d((w=e((m=function(t){function e(){for(var e,r=arguments.length,a=new Array(r),n=0;n<r;n++)a[n]=arguments[n];return e=t.call.apply(t,[this].concat(a))||this,i(e,"target",w,o(e)),i(e,"camera",y,o(e)),e.initialDirection=l(),e.speed=0,e}r(e,t);var a=e.prototype;return a.start=function(){u.subtract(this.initialDirection,this.node.worldPosition,this.target.worldPosition),this.camera.node.lookAt(this.target.worldPosition,u.UP)},a.update=function(t){u.add(C,this.target.worldPosition,this.initialDirection),this.node.setWorldPosition(C)},e}(p)).prototype,"target",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),y=e(m.prototype,"camera",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),h=m))||h));a._RF.pop()}}}));

System.register("chunks:///_virtual/GameUtil.ts",["./rollupPluginModLoBabelHelpers.js","cc","./PlayerData.ts","./Util.ts"],(function(t){var e,n,o,i;return{setters:[function(t){e=t.createClass},function(t){n=t.cclegacy},function(t){o=t.PlayerData},function(t){i=t.Util}],execute:function(){n._RF.push({},"f78daYW831Ln4WYfCnK4k3C","GameUtil",void 0);var r=t("WIFI_TYPE",function(t){return t.STAND_ALONE="stand-alone",t.WIFI="wifi",t}({})),s=t("ROOM_TYPE",function(t){return t.READY="ready",t.START="start",t.END="end",t}({})),a=t("RoomAloneInfo",(function(){this.players=[],this.customRoomProperties="",this.ownerId="",this.roomCode=""}));t("gameUtil",function(){function t(){this._isAi=!1,this._wifiType=r.WIFI,this._currFrame=0,this._recvMap=new Map,this._roomAloneInfo=new a,this._ownPlayerId="",this.roomType=s.READY,this._time=0,this._isStartFS=!1}return t.prototype.createRoomAI=function(t,e){var n=this;this._isAi=!0,this._wifiType=r.STAND_ALONE,this._currFrame=0,this._recvMap=new Map,console.log("aaaaaaaa2----createRoomAI 创建房间"),this._roomAloneInfo=new a,this._roomAloneInfo.ownerId=this._ownPlayerId,this._roomAloneInfo.roomCode="0001"+Math.floor(100*Math.random()),this._roomAloneInfo.players=[],this._roomAloneInfo.players.push({playerId:this._ownPlayerId,customPlayerProperties:o.instance.playerInfo.playerName}),i.randomName(1).then((function(t){n._roomAloneInfo.players.push({playerId:"ai00000",customPlayerProperties:t})})),this._roomAloneInfo.customRoomProperties=JSON.stringify({type:s.READY,time:0}),this.roomType=s.READY,this._time=0,this._isStartFS=!0,t&&t()},e(t,[{key:"isAi",get:function(){return this._isAi}},{key:"wifiType",get:function(){return this._wifiType}},{key:"currFrame",get:function(){return this._currFrame}},{key:"recvMap",get:function(){return this._recvMap}},{key:"ownPlayerId",get:function(){return this._ownPlayerId}}],[{key:"instance",get:function(){return this._instance||(this._instance=new t),this._instance}}]),t}())._instance=null,n._RF.pop()}}}));

System.register("chunks:///_virtual/HeadScaleManager.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Constant.ts","./ResourceUtil.ts"],(function(e){var t,a,o,i,n,r,s,c,l,u,d,p,h,f,g;return{setters:[function(e){t=e.applyDecoratedDescriptor,a=e.inheritsLoose,o=e.initializerDefineProperty,i=e.assertThisInitialized},function(e){n=e.cclegacy,r=e._decorator,s=e.Node,c=e.Camera,l=e.Vec3,u=e.Prefab,d=e.instantiate,p=e.director,h=e.Component},function(e){f=e.Constant},function(e){g=e.ResourceUtil}],execute:function(){var v,N,_,y,b,m,M,S;n._RF.push({},"1421bbsYq5F9LcCSHEOpLSy","HeadScaleManager",void 0);var P=r.ccclass,w=r.property;e("HeadScaleManager",(v=P("HeadScaleManager"),N=w(s),_=w(c),v((m=t((b=function(e){function t(){for(var t,a=arguments.length,n=new Array(a),r=0;r<a;r++)n[r]=arguments[r];return t=e.call.apply(e,[this].concat(n))||this,o(t,"target",m,i(t)),o(t,"camera",M,i(t)),o(t,"distance",S,i(t)),t.hpNode=void 0,t.uiNode=void 0,t._lastWPos=new l,t._pos=new l,t}a(t,e);var n=t.prototype;return n.onLoad=function(){var e=this;g.loadRes(f.UI_NAME.UI_HP_BAR,u,(function(t,a){e.hpNode=d(a),e.hpNode.active=!0,e.uiNode=p.getScene().getChildByPath("UIRoot/UIGame"),e.uiNode.addChild(e.hpNode)})),console.log("HeadScaleManager,onLoad")},n.update=function(){var e=this.target.worldPosition;this._lastWPos.set(e);var t=this.camera;t._camera.update(),t.convertToUINode(e,this.uiNode,this._pos),this.hpNode.setPosition(this._pos),l.transformMat4(this._pos,this.target.worldPosition,t._camera.matView);var a=this.distance/Math.abs(this._pos.z),o=Math.floor(100*a)/100;this.hpNode.setScale(o,o,1)},n.onDestroy=function(){console.log("HeadScaleManager,onDestroy"),this.hpNode.active=!1},n.reset=function(){this.hpNode&&(this.hpNode.active=!0)},t}(h)).prototype,"target",[N],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),M=t(b.prototype,"camera",[_],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),S=t(b.prototype,"distance",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),y=b))||y));n._RF.pop()}}}));

System.register("chunks:///_virtual/ISkill.ts",["cc"],(function(){var t;return{setters:[function(c){t=c.cclegacy}],execute:function(){t._RF.push({},"2ba1fJzIDdGUoif4Zw4H+5L","ISkill",void 0),t._RF.pop()}}}));

System.register("chunks:///_virtual/junitTs.ts",["./rollupPluginModLoBabelHelpers.js","cc","./ResourceUtil.ts","./Skill.ts"],(function(n){var e,o,t,i,s,a,l,r,c,u,g,d,f,p,h,m,v,y,_,M,b,C,S,j,k,x,w;return{setters:[function(n){e=n.applyDecoratedDescriptor,o=n.inheritsLoose,t=n.initializerDefineProperty,i=n.assertThisInitialized,s=n.asyncToGenerator,a=n.regeneratorRuntime},function(n){l=n.cclegacy,r=n._decorator,c=n.CCFloat,u=n.find,g=n.tween,d=n.Vec3,f=n.director,p=n.Prefab,h=n.instantiate,m=n.resources,v=n.SpriteAtlas,y=n.error,_=n.Sprite,M=n.primitives,b=n.Component,C=n.EventHandler,S=n.Button,j=n.sys,k=n.JsonAsset},function(n){x=n.ResourceUtil},function(n){w=n.Skill}],execute:function(){var B,P,T,F,R,D,A,L;l._RF.push({},"de673B+SJxF36ETdTpMN6FD","junitTs",void 0);var N=r.ccclass,q=r.property;n("junitTs",(B=N("junitTs"),P=q(c),T=q(c),B(((L=function(n){function e(){for(var e,o=arguments.length,s=new Array(o),a=0;a<o;a++)s[a]=arguments[a];return(e=n.call.apply(n,[this].concat(s))||this).loopCount=0,e.maxLoops=5,t(e,"radius",D,i(e)),t(e,"tube",A,i(e)),e}o(e,n);var l=e.prototype;return l.onLoad=function(){console.log("onLoad")},l.egMin=function(){console.log("")},l.egMax=function(){console.log("--------------------Start--------------------"),console.log("--------------------Deal--------------------"),console.log("--------------------Done--------------------")},l.start=function(){this.egMin_伤害飘字()},l.update=function(n){},l.egMin_伤害飘字=function(){this.toast("随机字串")},l.toast=function(n){console.log("显示飘字提醒");var e=u("hero/play4/扣血位置");this.startActions(e)},l.startActions=function(n){var e=this;console.log("startActions"),this.loopCount>=this.maxLoops||(n.setPosition(0,0,0),n.setScale(1,1,1),g(n).to(1,{position:new d(0,0,0)}).delay(2).to(2,{position:new d(0,500,0),scale:new d(0,0,0)}).call((function(){console.log("动画循环完成一次"),e.loopCount++,e.startActions(n)})).start())},l.egMin_hero_装备挂载=function(){console.log("egMin_hero_装备挂载");var n=f.getScene().getChildByPath("hero/play1").getChildByPath("小小伊泽瑞尔/bowstring Socket");x.loadRes("weapon/hammer",p,(function(e,o){h(o);n.addChild(o)}))},l.egMin_monster_装备挂载=function(){console.log("egMin_装备挂载");var n=f.getScene().getChildByPath("monster/Magician").getChildByPath("Magician/bow Socket"),e=m.get("weapon/hammer",p);h(e).setWorldPosition(n.worldPosition)},l.egMin_调用plist=function(){this.loadSpriteFrames()},l.loadSpriteFrames=function(){var n=this;m.load("ui/art/skill/texture",v,(function(e,o){if(console.log("加载资源"),e)y(e.message||e);else{var t=o.getSpriteFrame("image0");n.node.children[1].getComponent(_).spriteFrame=t}}))},l.egMin_text数组化=function(){var n="1,2,3,4".split(",").map((function(n){return Number(n.trim())}));console.log(n)},l.egMin_自动化设置模型=function(){for(var n=f.getScene().getChildByName("hero").children,e=0;e<n.length;++e){var o=n[e];console.log(o.name)}},l.egMin_任意旋转=function(){M.torus(this.radius,this.tube,{radialSegments:128,tubularSegments:128,arc:2*Math.PI*1})},l.egMin_布尔值切换=function(){var n=!0;console.log(n),n=!n,console.log(n)},l.egMin_动态加载技能类_2=function(){},l.egMin_多态_从json读取数据=function(){var n=s(a().mark((function n(){var e,o,t;return a().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,x.loadResType("data/skill",k);case 2:for(e=n.sent,o=e.json.RECORDS,t=0;t<o.length;t++)new w(o[t]).use(null,null);case 5:case"end":return n.stop()}}),n)})));return function(){return n.apply(this,arguments)}}(),l.egMin_ts速成=function(){console.log("p",{name:"Bobby",move:function(){}},"validPerson",{name:"Bobby",age:42,move:function(){}},"invalidPerson",{name:"Bobby",age:!0})},l.失败_egMin_动态加载技能类=function(){this.loadClass("../../script/core/entity/skill/skill/brand/brand_q.ts")},l.loadAllClasses=function(){var n=this;this.listFiles("../../script/core/entity/skill/skill/brand/brand_e.ts").forEach((function(e){n.loadClass(e)}))},l.listFiles=function(n){var e=require("fs");require("path");return e.readdirSync(n).filter((function(n){return n.endsWith(".ts")||n.endsWith(".js")}))},l.loadClass=function(n){var e=require("path"),o=e.join(__dirname,n),t=require(o),i=e.basename(n,e.extname(n)),s=t[i];s?new s instanceof b?console.info("Find class "+i+"."):console.error("Class "+i+" is not a Component."):console.error("Class "+i+" not found in "+n)},l.egMin_jsonarray同名数据处理=function(){var n=[{name:"a"},{name:"b"}],e={name:"a"},o=n.find((function(n){return n.name===e.name}));o?o.count?o.count++:o.count=2:n.push(e),console.log(n)},l.getRandomStates=function(n,e){n.length<e&&console.log("可供选择的技能数不足");for(var o=n.concat(),t=[];t.length<e;){var i=Math.floor(Math.random()*o.length),s=o[i];t.push(s),o.splice(i,1)}return t},l.egMax_json对象转化=function(){console.log("--------------------Start--------------------");console.log("--------------------Deal--------------------");var n=JSON.parse('{"id": 1, "name": "John", "email": "john@example.com","hpCost": 1}');console.log("--------------------Done--------------------"),console.log(n.id),console.log(n.name),console.log(n.email),console.log(n.hpCost)},l.egMin_按钮监听事件1=function(){var n=new C;n.target=this.node,n.component="junitTs",n.handler="callback",n.customEventData="dddd";this.node.getChildByName("Button").getComponent(S);this.node.getChildByName("Button").getComponent(S).clickEvents.push(n)},l.egMin_按钮监听事件_2=function(){this.node.getChildByName("Button").getComponent(S).node.on(S.EventType.CLICK,this.yourClickHandler,this)},l.callback=function(n,e){console.log("Button clicked!",e)},l.yourClickHandler=function(){console.log("yourClickHandler clicked!")},l.egMin_加载json=function(){var n=s(a().mark((function n(){var e;return a().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,x.loadResType("data/test",k);case 2:e=n.sent,console.log("names",e),console.log("names.json!",e.json),console.log("names.json",e.json),console.log("names.json.engine",e.json.engine),console.log("names.engine",e.engine);case 8:case"end":return n.stop()}}),n)})));return function(){return n.apply(this,arguments)}}(),l.失败_egMin_加载excel=function(){console.log("");var n=require("excel-convert"),e=require("fs").readFileSync("temp1.xlsx"),o=n.convert(new Uint8Array(e),"temp1.xlsx");console.log(o)},l.egMin_ResourceUtil_预制体加载=function(){console.log("junitTs-start-1"),y("你大爷的"),console.log("junitTs-start-2"),x.loadRes("ui/prefab/UILobby",p,(function(n,e){var o=h(e).getComponent("UILobby");console.log("junitTs"),o&&o.onPlay2&&o.onPlay2.apply()}))},l.egMin_字段截取=function(){var n="prefab",e=n.lastIndexOf("/"),o=n.slice(e+1);console.log("截取字段",o)},l.egMin_判定原生与否=function(){j.isNative?console.log("原生"):console.log("非原生/[cocos编辑器|浏览器]")},l.egMin_StorageManager=function(){console.log("egMin_StorageManager")},e}(b)).toastPools=[],D=e((R=L).prototype,"radius",[P],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),A=e(R.prototype,"tube",[T],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),F=R))||F));l._RF.pop()}}}));

System.register("chunks:///_virtual/LanguageData.ts",["cc"],(function(e){var n,a;return{setters:[function(e){n=e.cclegacy,a=e.director}],execute:function(){e({init:t,t:function(e){var n=window;if(!n.languages)return e;for(var a=e.split("."),t=n.languages[r],u=0;u<a.length;u++)if(!(t=t[a[u]]))return"";return t||""},updateSceneRenderers:u}),n._RF.push({},"b3f01X4Ik5LEbIPKXZr3JWD","LanguageData",void 0);var r=e("_language","zh");e("ready",!1);function t(n){e("ready",!0),r=e("_language",n)}function u(){for(var e=a.getScene().children,n=[],r=0;r<e.length;++r){var t=e[r].getComponentsInChildren("LocalizedLabel");Array.prototype.push.apply(n,t)}for(var u=0;u<n.length;++u){var i=n[u];i.node.active&&i.updateLabel()}for(var o=[],g=0;g<e.length;++g){var c=e[g].getComponentsInChildren("LocalizedSprite");Array.prototype.push.apply(o,c)}for(var l=0;l<o.length;++l){var p=o[l];p.node.active&&p.updateSprite()}}window._languageData={get language(){return r},init:function(e){t(e)},updateSceneRenderers:function(){u()}},n._RF.pop()}}}));

System.register("chunks:///_virtual/LevelCon.ts",["./rollupPluginModLoBabelHelpers.js","cc","./ActorActionCon.ts","./AudioManager.ts","./EffectManager.ts","./ActorCon.ts","./PlayerCon.ts","./ProjectileEmiter.ts","./FollowCameraManager.ts","./ResourceUtil.ts"],(function(n){var e,t,a,o,i,r,s,c,l,p,d,u,h,m,w,f,g,C,v,y,R,P,A,E,S,b,x,M,_,z;return{setters:[function(n){e=n.applyDecoratedDescriptor,t=n.inheritsLoose,a=n.initializerDefineProperty,o=n.assertThisInitialized,i=n.createClass},function(n){r=n.cclegacy,s=n._decorator,c=n.BoxCollider,l=n.Rect,p=n.v3,d=n.Size,u=n.v2,h=n.director,m=n.Camera,w=n.macro,f=n.math,g=n.randomRange,C=n.RigidBody,v=n.Component,y=n.Prefab,R=n.instantiate,P=n.resources},function(n){A=n.ActorActionCon},function(n){E=n.AudioManager},function(n){S=n.EffectManager},function(n){b=n.ActorCon},function(n){x=n.PlayerCon},function(n){M=n.ProjectileEmitter},function(n){_=n.FollowCameraManager},function(n){z=n.ResourceUtil}],execute:function(){var L,B,H,j,k,F;r._RF.push({},"23f55nKXlhMLpe+KB9Di+im","LevelCon",void 0);var D=s.ccclass,T=s.property;n("LevelCon",(L=D("LevelCon"),B=T(c),L(((F=function(n){function e(){for(var e,t=arguments.length,i=new Array(t),r=0;r<t;r++)i[r]=arguments[r];return e=n.call.apply(n,[this].concat(i))||this,a(e,"spawnCollider",k,o(e)),e.spawnRect=new l,e.spawnPos=p(),e.spawnHp=10,e.maxAlive=1,e.weaponNode=void 0,e}t(e,n);var r=e.prototype;return r.start=function(){var n=this;console.log("LevelCon.ts_start"),this.initPlayers(),e._instance=this;var t=this.spawnCollider.node.worldPosition,a=this.spawnCollider.size;this.spawnRect.size=new d(a.x,a.z),this.spawnRect.center=u(t.x,t.z),b.instance.init((function(){n.startSpawnTimer()})),S.instance.init(),E.instance.init()},r.onLoad=function(){},r.initPlayers=function(){for(var n,e=h.getScene().getChildByName("player"),t=h.getScene().getChildByName("camera").children,a=0;a<t.length;++a){var o=t[a];1==o.active&&(n=o.getComponent(m),b.instance.camera=n)}for(var i=e.children,r=function(){var e=i[s];if(1==e.active){console.log("导入节点名称",e.name);var t=e.children[0].name,a=e.addComponent(x);a.actor=e.addComponent(A),a.bow=e.getChildByPath(t+"/bow Socket"),a.bowstring=e.getChildByPath(t+"/bowstring Socket"),a.attackRange=30,z.loadRes("weapon/hammer",y,(function(n,t){var o=R(t);o.setPosition(a.bowstring.position),console.log("挂点位置",a.bowstring.position),e.addChild(o)}));var o=e.addComponent(M);o.projectile=P.get("model/projectile/Arrow",y),a.projectileEmitter=o;var r=n.addComponent(_);r.target=e,r.camera=n,b.instance.playerActor=a.actor}},s=0;s<i.length;++s)r()},r.startSpawnTimer=function(){var n=this;this.schedule((function(){n.randomSpawn()}),1,w.REPEAT_FOREVER,0),this.schedule((function(){n.spawnHp*=1.2}),20,w.REPEAT_FOREVER)},r.onDestroy=function(){this.unscheduleAllCallbacks(),e._instance=null,b.instance.clear(),S.instance.destory()},r.randomSpawn=function(){b.instance.enemies.length>=this.maxAlive||b.instance.playerActor.dead||(this.spawnPos.x=f.randomRange(this.spawnRect.xMin,this.spawnRect.xMax),this.spawnPos.z=f.randomRange(this.spawnRect.yMin,this.spawnRect.yMax),this.doSpawn(this.spawnPos))},r.doSpawn=function(n){var e,t=b.instance.createRandomEnemy();t.setPosition(n),null==(e=h.getScene())||e.addChild(t);var a=g(1,2),o=t.getComponent(A);o.actorProperty.hp=this.spawnHp,o.actorProperty.maxHp=this.spawnHp,console.log("doSpawn",this.spawnHp),o.respawn();var i=t.getComponent(C);i.mass=a,t.scale=p(i.mass,i.mass,i.mass)},i(e,null,[{key:"instance",get:function(){return this._instance}}]),e}(v))._instance=void 0,k=e((j=F).prototype,"spawnCollider",[B],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),H=j))||H));r._RF.pop()}}}));

System.register("chunks:///_virtual/LocalizedLabel.ts",["./rollupPluginModLoBabelHelpers.js","cc","./LanguageData.ts"],(function(e){var t,i,r,n,o,a,l,c,s,u,p;return{setters:[function(e){t=e.applyDecoratedDescriptor,i=e.inheritsLoose,r=e.initializerDefineProperty,n=e.assertThisInitialized,o=e.createClass},function(e){a=e.cclegacy,l=e._decorator,c=e.Component},function(e){s=e.ready,u=e.init,p=e.t}],execute:function(){var y,d,b,f,h,L;a._RF.push({},"edf98QH2D1AUoCrtQlbxFrU","LocalizedLabel",void 0);var g=l.ccclass,v=l.property,k=l.executeInEditMode;e("LocalizedLabel",(y=g("LocalizedLabel"),d=v({visible:!1}),b=v({displayName:"Key",visible:!0}),y(f=k((L=t((h=function(e){function t(){for(var t,i=arguments.length,o=new Array(i),a=0;a<i;a++)o[a]=arguments[a];return(t=e.call.apply(e,[this].concat(o))||this).label=null,r(t,"key",L,n(t)),t}i(t,e);var a=t.prototype;return a.onLoad=function(){s||u("zh"),this.fetchRender()},a.fetchRender=function(){var e=this.getComponent("cc.Label");if(e)return this.label=e,void this.updateLabel()},a.updateLabel=function(){this.label&&(this.label.string=p(this.key))},o(t,[{key:"_key",get:function(){return this.key},set:function(e){this.updateLabel(),this.key=e}}]),t}(c)).prototype,"key",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),t(h.prototype,"_key",[b],Object.getOwnPropertyDescriptor(h.prototype,"_key"),h.prototype),f=h))||f)||f));a._RF.pop()}}}));

System.register("chunks:///_virtual/LocalizedSprite.ts",["./rollupPluginModLoBabelHelpers.js","cc","./LanguageData.ts"],(function(e){var t,i,r,n,a,o,p,s,c,u,l;return{setters:[function(e){t=e.applyDecoratedDescriptor,i=e.initializerDefineProperty,r=e.inheritsLoose,n=e.assertThisInitialized},function(e){a=e.cclegacy,o=e._decorator,p=e.SpriteFrame,s=e.Component},function(e){c=e.ready,u=e.init,l=e._language}],execute:function(){var f,h,d,g,y,z,L,m,b,v,S;a._RF.push({},"c05c25C4xNAupWYMB93tIzp","LocalizedSprite",void 0);var F=o.ccclass,_=o.property,w=o.executeInEditMode,D=(f=F("LocalizedSpriteItem"),h=_({type:p}),f((y=t((g=function(){i(this,"language",y,this),i(this,"spriteFrame",z,this)}).prototype,"language",[_],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return"zh"}}),z=t(g.prototype,"spriteFrame",[h],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),d=g))||d);e("LocalizedSprite",(L=F("LocalizedSprite"),m=_({type:D}),L(b=w((S=t((v=function(e){function t(){for(var t,r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(t=e.call.apply(e,[this].concat(a))||this).sprite=null,i(t,"spriteList",S,n(t)),t}r(t,e);var a=t.prototype;return a.onLoad=function(){c||u("zh"),this.fetchRender()},a.fetchRender=function(){var e=this.getComponent("cc.Sprite");if(e)return this.sprite=e,void this.updateSprite()},a.updateSprite=function(){for(var e=0;e<this.spriteList.length;e++){var t=this.spriteList[e];if(t.language===l){this.sprite.spriteFrame=t.spriteFrame;break}}},t}(s)).prototype,"spriteList",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),b=v))||b)||b));a._RF.pop()}}}));

System.register("chunks:///_virtual/main",["./debug-view-runtime-control.ts","./junitTs.ts","./resourceUtilOld.ts","./maodian.ts","./Constant.ts","./PhysicsGroup.ts","./ActorActionCon.ts","./EnemyController.ts","./PlayerCon.ts","./ActorCon.ts","./LevelCon.ts","./Projectile.ts","./ProjectileEmiter.ts","./ProjectileProperty.ts","./SkillCon.ts","./ActorProperty.ts","./ISkill.ts","./Effector.ts","./Trigger.ts","./ActionEffector.ts","./BuffEffector.ts","./BulletEffector.ts","./%E5%87%BB%E6%9D%80%E5%9B%9E%E8%93%9D.ts","./%E7%81%BC%E7%83%A7.ts","./%E9%87%8E%E6%80%AA%E5%A2%9E%E4%BC%A4.ts","./Skill.ts","./brand_e.ts","./brand_passive.ts","./brand_q.ts","./brand_r.ts","./brand_w.ts","./add_attribute.ts","./other.ts","./self_skill.ts","./demoSkill.ts","./PlayerData.ts","./PlayerPreference.ts","./Prop.ts","./PropBase.ts","./Setting.ts","./VirtualInput.ts","./AnimationEventListener.ts","./EventListener.ts","./AudioManager.ts","./CombatTextManager.ts","./EffectManager.ts","./FollowCameraManager.ts","./HeadScaleManager.ts","./PoolManager.ts","./Pools.ts","./StorageManager.ts","./UiManager.ts","./GameUtil.ts","./MathUtil.ts","./ResourceUtil.ts","./TimeUtil.ts","./Util.ts","./UIGame.ts","./UILobby.ts","./UIStart.ts","./UIJoyStick.ts","./UILevelCon.ts","./UISkillBtn.ts","./UISkillBtnUsed.ts","./UITips.ts","./UITransitionBgPanel.ts","./UITransitionPanel.ts","./LanguageData.ts","./LocalizedLabel.ts","./LocalizedSprite.ts"],(function(){return{setters:[null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null],execute:function(){}}}));

System.register("chunks:///_virtual/maodian.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(o){var t,n,e,i;return{setters:[function(o){t=o.inheritsLoose},function(o){n=o.cclegacy,e=o._decorator,i=o.Component}],execute:function(){var a;n._RF.push({},"7ad1c5HqHtCg5FQgYu4Dd5s","maodian",void 0);var r=e.ccclass;e.property,o("maodian",r("maodian")(a=function(o){function n(){return o.apply(this,arguments)||this}t(n,o);var e=n.prototype;return e.start=function(){console.log("锚点",this.node.getPosition(),this.node.getWorldPosition());var o=this.node.getChildByPath("ShockWave/ShockWave-001");console.log("ShockWave001锚点",o.getPosition(),o.getWorldPosition())},e.update=function(o){},n}(i))||a);n._RF.pop()}}}));

System.register("chunks:///_virtual/MathUtil.ts",["cc"],(function(t){var n,r,c;return{setters:[function(t){n=t.cclegacy,r=t.v3,c=t.Vec3}],execute:function(){n._RF.push({},"5b49cQhE5FMZq7mTeW8qi77","MathUtil",void 0);var a=r(),e=r(),o=r(),i=r();t("MathUtil",function(){function t(){}return t.rotateAround=function(t,n,r,i){var s=Math.cos(i),u=Math.sin(i);c.multiplyScalar(a,n,s),c.cross(e,r,n),c.scaleAndAdd(o,a,e,u);var l=c.dot(r,n);c.scaleAndAdd(t,o,r,l*(1-s))},t.rotateToward=function(t,n,r,a){c.cross(i,n,r),this.rotateAround(t,n,i,a)},t.signAngle=function(t,n,r){var e=c.angle(t,n);return c.cross(a,t,n),e*Math.sign(r.x*a.x+r.y*a.y+r.z*a.z)},t}());n._RF.pop()}}}));

System.register("chunks:///_virtual/other.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Skill.ts","./Constant.ts","./EffectManager.ts"],(function(t){var o,n,e,i,r,s,a;return{setters:[function(t){o=t.inheritsLoose},function(t){n=t.cclegacy,e=t.v3,i=t.Vec3},function(t){r=t.Skill},function(t){s=t.Constant},function(t){a=t.EffectManager}],execute:function(){n._RF.push({},"4dfaesnMmRIY6/NJcQhDiRc","other",void 0);t("other",function(t){function n(){return t.apply(this,arguments)||this}return o(n,t),n.prototype.use=function(t,o){var n=this;if(!o)return console.log("敌人已死亡或找不到"),null;if(!this.isAvailable())return console.log("技能正在冷却中！"),null;this.lastUsedTime=Date.now();var r=t.node.name,c=o.name;console.log("other",c);var l,u=t.node,f=o,h=t.actor.actorProperty,g=t.actor,p=o.getComponent("ActorActionCon");(g.changeState(s.ACTION.Magic),this.effect1)&&(null==(l=a.instance)||l.play(this.effect1,f.worldPosition));return setTimeout((function(){var o=n.level-1;h.mp-=n.mpCost[o];var a=n.damageBase[o]+(t.ap||0)*n.ratio;console.log(r+" 向 "+c+"使用了"+n.name+"，造成 "+a.toFixed(2)+" 魔法伤害");var l=e();console.log(u.worldPosition,f.worldPosition),i.subtract(l,u.worldPosition,f.worldPosition),l.normalize(),p.hurt(a,u.getComponent("ActorActionCon"),l),p.changeState(s.ACTION.Hit)}),1e3*this.hitMoment),!0},n}(r));n._RF.pop()}}}));

System.register("chunks:///_virtual/PhysicsGroup.ts",["cc"],(function(e){var t,r;return{setters:[function(e){t=e.cclegacy,r=e.PhysicsSystem}],execute:function(){t._RF.push({},"9bb12CKYf1DXKsLVK+wE/DY","PhysicsGroup",void 0);var s=e("PhysicsGroup",function(){function e(){}return e.isHurtable=function(e,t){return e==this.Enemy?t==this.Player:e==this.PlayerProjectile?t==this.Enemy:e==this.EnemyProjectile&&t==this.Player},e}());s.Default=r.PhysicsGroup.DEFAULT,s.Player=2,s.Enemy=4,s.PlayerProjectile=8,s.EnemyProjectile=16,t._RF.pop()}}}));

System.register("chunks:///_virtual/PlayerCon.ts",["./rollupPluginModLoBabelHelpers.js","cc","./ActorActionCon.ts","./ActorCon.ts","./Constant.ts","./VirtualInput.ts","./ProjectileEmiter.ts","./MathUtil.ts","./AudioManager.ts","./SkillCon.ts"],(function(t){var e,o,i,n,r,a,s,l,c,h,u,p,d,f,g,m,y,k,v,A,C,E,P;return{setters:[function(t){e=t.applyDecoratedDescriptor,o=t.inheritsLoose,i=t.initializerDefineProperty,n=t.assertThisInitialized,r=t.createForOfIteratorHelperLoose,a=t.createClass},function(t){s=t.cclegacy,l=t._decorator,c=t.v3,h=t.Node,u=t.CCFloat,p=t.Vec3,d=t.randomRange,f=t.math,g=t.Component},function(t){m=t.ActorActionCon},function(t){y=t.ActorCon},function(t){k=t.Constant},function(t){v=t.VirtualInput},function(t){A=t.ProjectileEmitter},function(t){C=t.MathUtil},function(t){E=t.AudioManager},function(t){P=t.SkillCon}],execute:function(){var L,w,F,S,b,N,M,I,x,_,R;s._RF.push({},"26cfehfkThC/4Ru/Gtrp+5y","PlayerCon",void 0);var T=l.ccclass,j=l.property,O=l.requireComponent,z=c();t("PlayerCon",(L=T("PlayerCon"),w=O(m),F=O(A),S=j(h),b=j(h),N=j(u),L(M=w(M=F((x=e((I=function(t){function e(){for(var e,o=arguments.length,r=new Array(o),a=0;a<o;a++)r[a]=arguments[a];return(e=t.call.apply(t,[this].concat(r))||this).actor=null,i(e,"bow",x,n(e)),i(e,"bowstring",_,n(e)),e.shootDirection=c(),i(e,"attackRange",R,n(e)),e.projectileEmitter=void 0,e._splitAngle=[0],e.enemy=void 0,e.skillList=[],e.isAutoSkill=!1,e}o(e,t);var s=e.prototype;return s.start=function(){this.node.on("onFrameAttackLoose",this.onFrameAttackLoose,this),this.node.on("onFrameMagicLoose",this.onFrameMagicLoose,this),this.node.on(k.EVENT_NAME.onEnemyKilled,this.onKilled,this)},s.getSkillByIdPlayerOwn=function(t){var e=this.skillList.find((function(e){return e.id===t}));return e||(e=P.instance.getSkillById(Number(t)))},s.gainSkill=function(t,e){console.log("点击后_属性技能",e);var o=this.getSkillByIdPlayerOwn(Number(e));this.addSkillList(o,!1);for(var i=P.instance.skillChoiceList,n=0;n<i.length;n++){var r=i[n].skill;if(r.name===o.name){o.level===r.cd.length&&i.splice(n,1);break}}o.propertyValue&&o.use(this,null);var a=t.target;console.log("升级后属性信息",this.actor.actorProperty,"升级后技能信息",this.skillList),console.log("技能池所有信息",P.instance.skillList,"技能池初始化信息",P.instance.skillInitList,"技能池候选信息",P.instance.skillChoiceList),this.node.emit(k.EVENT_NAME.updatePlayerInfo),a.parent.parent.destroy()},s.addSkillList=function(t,e){var o=this.skillList.find((function(e){return e.name===t.name}));o?o.level++:this.skillList.push(t)},s.attackOrMagic=function(){return!!(this.isAutoSkill&&this.skillList.length>0&&this.getUseSkill())},s.getUseSkill=function(){for(var t=0;t<this.skillList.length;t++){var e=this.skillList[t];if(e.isAvailable())return e}},s.onDestroy=function(){y.instance.playerActor=null,this.node.off("onFrameAttackLoose",this.onFrameAttackLoose,this),this.node.off("onFrameMagicLoose",this.onFrameMagicLoose,this),this.node.off(k.EVENT_NAME.onEnemyKilled,this.onKilled,this)},s.onKilled=function(t){var e=this.actor.actorProperty;e.exp++,this.node.emit(k.EVENT_NAME.onExpGain),e.exp>=e.maxExp&&(e.exp-=e.maxExp,e.maxExp=parseFloat((1.1*e.maxExp).toFixed(2)),e.level++,this.onUpgradeLevel())},s.onUpgradeLevel=function(){this.node.emit(k.EVENT_NAME.onPlayerUpgrade)},s.onFrameMagicLoose=function(){console.log("施法动作")},s.onFrameAttackLoose1=function(){},s.onFrameAttackLoose=function(){var t;null==(t=E.instance)||t.playSfx(k.DYNAMIC_RESOURCE.audio.SfxShoot);var e=this.bowstring.worldPosition;p.subtract(this.shootDirection,this.bow.worldPosition,e),this.shootDirection.normalize();for(var o=0;o<this.projectileCount;o++){var i=this.projectileEmitter.create();C.rotateAround(z,this.node.forward,p.UP,this._splitAngle[o]),i.node.forward=z.clone(),i.node.worldPosition=e,i.host=this.node;var n=i.projectProperty;n.penetration=this.actor.actorProperty.penetration;var r=d(0,100)<this.actor.actorProperty.chaseRate;r&&(i.target=y.instance.randomEnemy,n.chase=r&&null!=i.target),null==i||i.fire()}},s.handleInput=function(){var t=v.horizontal,e=v.vertical;return this.actor.destForward.x=t,this.actor.destForward.z=-e,this.actor.destForward.y=0,this.actor.destForward.normalize(),this.actor.destForward.length()},s.getNeareastEnemy=function(){var t=y.instance.enemies;if(!t||0==(null==t?void 0:t.length))return null;for(var e,o=this.attackRange,i=null,n=r(t);!(e=n()).done;){var a=e.value;if(!a.getComponent(m).dead){var s=p.distance(this.node.worldPosition,a.worldPosition);s<o&&(o=s,i=a)}}return i},s.update=function(t){if(this.actor.currState!=k.ACTION.Die&&this.actor.currState!=k.ACTION.Hit)if(this.handleInput()>.1)this.actor.changeState(k.ACTION.Run);else{this.enemy=this.getNeareastEnemy();var e=this.enemy;e?(p.subtract(this.actor.destForward,e.worldPosition,this.node.worldPosition),this.actor.destForward.normalize(),this.attackOrMagic()?this.actor.changeState(k.ACTION.Magic):this.actor.changeState(k.ACTION.Attack)):this.actor.changeState(k.ACTION.Idle)}},a(e,[{key:"projectileCount",get:function(){return this.actor.actorProperty.projectileCount},set:function(t){var e=this.actor.actorProperty;t<=0&&(e.projectileCount=1),e.projectileCount=t,this._splitAngle=[];for(var o=f.toRadian(10),i=t%2!=0,n=Math.floor(e.projectileCount/2),r=0;r<n;r++)this._splitAngle.push(-o*(r+1)),this._splitAngle.push(o*(r+1));i&&this._splitAngle.push(0)}},{key:"penetration",get:function(){return this.actor.actorProperty.penetration},set:function(t){console.log("penetraion计算数值",t),this.actor.actorProperty.penetration=f.clamp(t,0,100)}},{key:"chaseRate",get:function(){return this.actor.actorProperty.chaseRate},set:function(t){this.actor.actorProperty.chaseRate=f.clamp(t,0,100)}}]),e}(g)).prototype,"bow",[S],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),_=e(I.prototype,"bowstring",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),R=e(I.prototype,"attackRange",[N],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 99999}}),M=I))||M)||M)||M));s._RF.pop()}}}));

System.register("chunks:///_virtual/PlayerData.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Constant.ts","./StorageManager.ts"],(function(t){var e,n,s,i,a,o,r;return{setters:[function(t){e=t.inheritsLoose,n=t.createClass},function(t){s=t.cclegacy,i=t._decorator,a=t.Component},function(t){o=t.Constant},function(t){r=t.StorageManager}],execute:function(){var c,h;s._RF.push({},"1bd75OcmilDmLeB3HXN/tCG","PlayerData",void 0);var u=i.ccclass;t("PlayerData",u("PlayerData")(((h=function(t){function s(){for(var e,n=arguments.length,s=new Array(n),i=0;i<n;i++)s[i]=arguments[i];return(e=t.call.apply(t,[this].concat(s))||this).serverTime=0,e.localTime=0,e._userId="",e._playerInfo=null,e._history=null,e._settings=null,e._isNewBee=!1,e._dataVersion="",e.isInit=!1,e._easyTouchInfo={},e}e(s,t);var i=s.prototype;return i.loadGlobalCache=function(){var t=r.instance.getUserId();t&&(this._userId=t)},i.loadFromCache=function(){this.loadGlobalCache(),this.userId||this.generateRandomAccount(),this._playerInfo=this._loadDataByKey(o.LOCAL_CACHE.PLAYER),this._history=this._loadDataByKey(o.LOCAL_CACHE.HISTORY),this._settings=this._loadDataByKey(o.LOCAL_CACHE.SETTINGS)},i._loadDataByKey=function(t){var e={},n=r.instance.getConfigData(t);if(n)try{e=JSON.parse(n)}catch(t){e={}}return e},i.createPlayerInfo=function(t){if(this._playerInfo={},t)for(var e in t)this._playerInfo[e]=t[e];this.savePlayerInfoToLocalCache()},i.generateRandomAccount=function(){this.userId=(new Date).getTime()+"_"+Math.floor(1e3*Math.random()),r.instance.setUserId(this._userId)},i.saveAccount=function(t){this._userId=t,r.instance.setUserId(t)},i.savePlayerInfoToLocalCache=function(){r.instance.setConfigData(o.LOCAL_CACHE.PLAYER,JSON.stringify(this._playerInfo))},i.saveSettingsToLocalCache=function(){r.instance.setConfigData(o.LOCAL_CACHE.SETTINGS,JSON.stringify(this._settings)),r.instance.save()},i.saveAll=function(){r.instance.setConfigDataWithoutSave(o.LOCAL_CACHE.PLAYER,JSON.stringify(this._playerInfo)),r.instance.setConfigDataWithoutSave(o.LOCAL_CACHE.HISTORY,JSON.stringify(this._history)),r.instance.setConfigDataWithoutSave(o.LOCAL_CACHE.SETTINGS,JSON.stringify(this._settings)),r.instance.setConfigData(o.LOCAL_CACHE.DATA_VERSION,this._dataVersion)},i.updatePlayerInfo=function(t,e){this._playerInfo[t]=e,r.instance.setConfigData(o.LOCAL_CACHE.PLAYER,JSON.stringify(this._playerInfo))},i.getSetting=function(t){return this._settings&&this._settings.hasOwnProperty(t)?this._settings[t]:null},i.setSetting=function(t,e){this._settings||(this._settings={}),this._settings[t]=e,this.saveSettingsToLocalCache()},i.clear=function(){this._playerInfo={},this._settings={},this.saveAll()},i.updateEasyTouchInfo=function(t,e){this._easyTouchInfo[t]=e},i.getEasyTouchInfo=function(t){return this._easyTouchInfo.hasOwnProperty(t)||(this._easyTouchInfo[t]=0),this._easyTouchInfo[t]},n(s,[{key:"userId",get:function(){return this._userId},set:function(t){this._userId=t}},{key:"settings",get:function(){return this._settings},set:function(t){this._settings=t}},{key:"playerInfo",get:function(){return this._playerInfo}},{key:"history",get:function(){return this._history}},{key:"isNewBee",get:function(){return this._isNewBee},set:function(t){this._isNewBee=t}}],[{key:"instance",get:function(){return this._instance||(this._instance=new s),this._instance}}]),s}(a))._instance=void 0,c=h))||c);s._RF.pop()}}}));

System.register("chunks:///_virtual/PlayerPreference.ts",["cc"],(function(e){var r,t,c;return{setters:[function(e){r=e.cclegacy,t=e._decorator,c=e.sys}],execute:function(){var n;r._RF.push({},"6d8b0XbjGpOJr246xxO/QqX","PlayerPreference",void 0);var a=t.ccclass;e("PlayerPreference",a("PlayerPreference")(n=function(){function e(){}return e.setFloat=function(e,r){c.localStorage.setItem(e,r.toString())},e.getFloat=function(e){var r=c.localStorage.getItem(e);return Number.parseFloat(r)},e}())||n);r._RF.pop()}}}));

System.register("chunks:///_virtual/PoolManager.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(t){var o,n,e,i,a;return{setters:[function(t){o=t.createClass},function(t){n=t.cclegacy,e=t._decorator,i=t.instantiate,a=t.NodePool}],execute:function(){var r,c;n._RF.push({},"ec2aci9Kv9GpZHwVbtWgfZx","PoolManager",void 0);var s=e.ccclass;t("PoolManager",s("PoolManager")(((c=function(){function t(){this._dictPool={},this._dictPrefab={}}var n=t.prototype;return n.getNode=function(t,o){var n=t.name;t.position||(n=t.data.name),this._dictPrefab[n]=t;var e=null;if(this._dictPool.hasOwnProperty(n)){var r=this._dictPool[n];e=r.size()>0?r.get():i(t)}else{var c=new a;this._dictPool[n]=c,e=i(t)}return e.parent=o,e.active=!0,e},n.putNode=function(t){if(t){var o=t.name,n=null;this._dictPool.hasOwnProperty(o)?n=this._dictPool[o]:(n=new a,this._dictPool[o]=n),n.put(t)}},n.clearPool=function(t){this._dictPool.hasOwnProperty(t)&&this._dictPool[t].clear()},n.prePool=function(t,o){var n=t.name,e=new a;this._dictPool[n]=e;for(var r=0;r<o;r++){var c=i(t);e.put(c)}},o(t,null,[{key:"instance",get:function(){return this._instance||(this._instance=new t),this._instance}}]),t}())._instance=void 0,r=c))||r);n._RF.pop()}}}));

System.register("chunks:///_virtual/Pools.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(o){var t,e,r,s;return{setters:[function(o){t=o.createForOfIteratorHelperLoose},function(o){e=o.cclegacy,r=o._decorator,s=o.Pool}],execute:function(){var n;e._RF.push({},"263cbJOpb5O2r/isQcP+LXs","Pools",void 0);var l=r.ccclass;o("Pools",l("Pools")(n=function(){function o(){this.pools=new Map}var e=o.prototype;return e.pool=function(o){return this.pools.get(o)},e.newPool=function(o,t,e,r){var n=new s(t,e,r);this.pools.set(o,n)},e.allocc=function(o){return this.pool(o).alloc()},e.free=function(o,t){this.pool(o).free(t)},e.destory=function(o){this.pool(o).destroy()},e.destroyAll=function(){for(var o,e=t(this.pools.values());!(o=e()).done;){o.value.destroy()}this.pools.clear()},o}())||n);e._RF.pop()}}}));

System.register("chunks:///_virtual/Projectile.ts",["./rollupPluginModLoBabelHelpers.js","cc","./AudioManager.ts","./EffectManager.ts","./Constant.ts","./MathUtil.ts","./ProjectileProperty.ts"],(function(t){var e,r,i,o,n,a,s,l,c,p,d,u,f,h,y,g,P,m,E;return{setters:[function(t){e=t.applyDecoratedDescriptor,r=t.inheritsLoose,i=t.initializerDefineProperty,o=t.assertThisInitialized,n=t.createForOfIteratorHelperLoose},function(t){a=t.cclegacy,s=t._decorator,l=t.v3,c=t.Collider,p=t.CCFloat,d=t.ParticleSystem,u=t.Vec3,f=t.math,h=t.Component},function(t){y=t.AudioManager},function(t){g=t.EffectManager},function(t){P=t.Constant},function(t){m=t.MathUtil},function(t){E=t.ProjectileProperty}],execute:function(){var w,v,S,j,T,C,b,M,A;a._RF.push({},"92884HW7q1LLJQezcxPza27","Projectile",void 0);var D=s.ccclass,z=s.property,_=l();t("Projectile",(w=D("Projectile"),v=z(c),S=z(p),j=z(p),w((b=e((C=function(t){function e(){for(var e,r=arguments.length,n=new Array(r),a=0;a<r;a++)n[a]=arguments[a];return e=t.call.apply(t,[this].concat(n))||this,i(e,"collider",b,o(e)),e.startTime=0,e.position=l(),e.projectProperty=new E,e.host=null,e.target=null,e.forward=l(),i(e,"angularSpeed",M,o(e)),i(e,"linearSpeed",A,o(e)),e.particleSystems=[],e}r(e,t);var a=e.prototype;return a.start=function(){var t;null==(t=this.collider)||t.on("onTriggerEnter",this.onTriggerEnter,this),this.particleSystems=this.node.getComponentsInChildren(d)},a.onDisable=function(){for(var t,e=n(this.particleSystems);!(t=e()).done;){t.value.stop()}},a.onDestroy=function(){this.collider.off("onTriggerEnter",this.onTriggerEnter,this)},a.fire=function(){this.startTime=0;for(var t,e=n(this.particleSystems);!(t=e()).done;){t.value.play()}},a.update=function(t){var e;if(this.startTime+=t,(this.startTime>=this.projectProperty.liftTime||this.node.worldPosition.y<0)&&this.node.emit(P.EVENT_NAME.onProjectileDead,this),null!=(e=this.projectProperty)&&e.chase){u.subtract(this.forward,this.target.worldPosition,this.node.worldPosition),this.forward.normalize();var r=this.angularSpeed*t;m.rotateToward(_,this.node.forward,this.forward,f.toRadian(r)),this.node.forward=_}u.scaleAndAdd(this.position,this.node.worldPosition,this.node.forward,this.linearSpeed*t),this.node.worldPosition=this.position},a.onTriggerEnter=function(t){var e,r;this.projectProperty.penetration--,this.projectProperty.penetration<=0&&this.node.emit(P.EVENT_NAME.onProjectileDead,this),null==(e=g.instance)||e.play(P.DYNAMIC_RESOURCE.Effect.EffExplore,t.selfCollider.node.worldPosition),null==(r=y.instance)||r.playSfx(P.DYNAMIC_RESOURCE.audio.SfxHit)},e}(h)).prototype,"collider",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),M=e(C.prototype,"angularSpeed",[S],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 180}}),A=e(C.prototype,"linearSpeed",[j],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),T=C))||T));a._RF.pop()}}}));

System.register("chunks:///_virtual/ProjectileEmiter.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Constant.ts","./Projectile.ts"],(function(e){var t,r,o,n,i,c,a,l,s,u,p,f,P;return{setters:[function(e){t=e.applyDecoratedDescriptor,r=e.inheritsLoose,o=e.initializerDefineProperty,n=e.assertThisInitialized},function(e){i=e.cclegacy,c=e._decorator,a=e.Prefab,l=e.Pool,s=e.instantiate,u=e.director,p=e.Component},function(e){f=e.Constant},function(e){P=e.Projectile}],execute:function(){var d,h,j,v,y;i._RF.push({},"099f7+8cvJLS4Ye1JPqEanz","ProjectileEmiter",void 0);var b=c.ccclass,m=c.property;e("ProjectileEmitter",(d=b("ProjectileEmitter"),h=m(a),d((y=t((v=function(e){function t(){for(var t,r=arguments.length,i=new Array(r),c=0;c<r;c++)i[c]=arguments[c];return t=e.call.apply(e,[this].concat(i))||this,o(t,"projectile",y,n(t)),t.prefabPool=null,t}r(t,e);var i=t.prototype;return i.start=function(){var e=this;this.prefabPool=new l((function(){return s(e.projectile)}),5,(function(e){e.removeFromParent()}))},i.onDestroy=function(){this.prefabPool.destroy()},i.create=function(){var e=this.prefabPool.alloc();return null==e.parent&&u.getScene().addChild(e),e.active=!0,e.once(f.EVENT_NAME.onProjectileDead,this.onProjectileDead,this),e.getComponent(P)},i.onProjectileDead=function(e){e.node.active=!1,this.prefabPool.free(e.node)},t}(p)).prototype,"projectile",[h],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),j=v))||j));i._RF.pop()}}}));

System.register("chunks:///_virtual/ProjectileProperty.ts",["cc"],(function(e){var t;return{setters:[function(e){t=e.cclegacy}],execute:function(){t._RF.push({},"cb76aMAafRFHLueDHyCe4WS","ProjectileProperty",void 0);e("ProjectileProperty",(function(){this.penetration=1,this.liftTime=3,this.chase=!1}));t._RF.pop()}}}));

System.register("chunks:///_virtual/Prop.ts",["cc"],(function(t){var e;return{setters:[function(t){e=t.cclegacy}],execute:function(){e._RF.push({},"a176fa2So5DbZUg+o25k6S3","Prop",void 0);t("PropType",function(t){return t[t.NULL=0]="NULL",t[t.COIN=1]="COIN",t[t.HAMMER=2]="HAMMER",t[t.RAINING_COIN=3]="RAINING_COIN",t[t.HAMMER_ED=4]="HAMMER_ED",t}({}));e._RF.pop()}}}));

System.register("chunks:///_virtual/PropBase.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(e){var n,t,o,r,s,i;return{setters:[function(e){n=e.inheritsLoose},function(e){t=e.cclegacy,o=e._decorator,r=e.Tween,s=e.Vec3,i=e.Component}],execute:function(){var l;t._RF.push({},"5bdd8VKSuNCNJ/Avb50VJbb","PropBase",void 0);var a=o.ccclass;o.property,e("PropBase",a("PropBase")(l=function(e){function t(){for(var n,t=arguments.length,o=new Array(t),r=0;r<t;r++)o[r]=arguments[r];return(n=e.call.apply(e,[this].concat(o))||this)._tween=null,n._dropTween=null,n._propInfo=null,n._isDisappearEffShowing=!1,n._parentName="",n._prop=null,n._disappearCb=null,n._targetEuler=new s(0,-360,0),n._oriEuler=new s,n}n(t,e);var o=t.prototype;return o.onDisable=function(){this.unscheduleAllCallbacks()},o.show=function(e){var n,t=this;this.node.eulerAngles=this._oriEuler,this._tween&&(this._tween.stop(),this._tween=null),this._tween=new r(this.node).to(3*e.scale,{eulerAngles:this._targetEuler}).call((function(){t.node.eulerAngles=t._oriEuler})).union().repeatForever().start(),this._propInfo=e,this._parentName=null==(n=this.node.parent)?void 0:n.name,this._isDisappearEffShowing=!1},o.drop=function(e){var n=this,t=this.node.position.clone().subtract(e).length();this._dropTween=new r(this.node).to(t/10,{position:e}).call((function(){n._dropTween=null,n.node.setPosition(e)})).start()},o.updateState=function(e,n){this._prop=n},t}(i))||l);t._RF.pop()}}}));

System.register("chunks:///_virtual/ResourceUtil.ts",["cc"],(function(e){var n,o,t,r,i,c,u;return{setters:[function(e){n=e.cclegacy,o=e._decorator,t=e.resources,r=e.error,i=e.Prefab,c=e.instantiate,u=e.find}],execute:function(){var s;n._RF.push({},"2d479mXo0hN6Jtnlwe3glUq","ResourceUtil",void 0);var a=o.ccclass;e("ResourceUtil",a("ResourceUtil")(s=function(){function e(){}return e.loadRes=function(e,n,o){void 0===o&&(o=function(){}),console.log("loadRes"),t.load(e,(function(e,n){if(e)return r(e.message||e),void o(e,n);o&&o(null,n)}))},e.loadResType=function(e,n){return new Promise((function(o,i){t.load(e,n,(function(e,n){if(e)return r(e.message||e),void(i&&i(e));o&&o(n)}))}))},e.getUIPrefabRes=function(e,n){this.loadRes("ui/prefab/"+e,i,n)},e.createUI=function(e,n,o){this.getUIPrefabRes(e,(function(e,o){if(!e){var t=c(o);t.setPosition(0,0,0);var r=null;r=u("UIRoot"),console.log("createUI",r),r.addChild(t),n&&n(null,t)}}))},e.loadModelResArr=function(e,n,o,r){var c=n.map((function(n){return e+"/"+n}));t.load(c,i,o,r)},e}())||s);n._RF.pop()}}}));

System.register("chunks:///_virtual/resourceUtilOld.ts",["cc"],(function(e){var n,t,o,r,i,a,s,f,l,u,c;return{setters:[function(e){n=e.cclegacy,t=e._decorator,o=e.resources,r=e.error,i=e.Prefab,a=e.instantiate,s=e.find,f=e.SpriteFrame,l=e.Texture2D,u=e.assetManager,c=e.isValid}],execute:function(){n._RF.push({},"6cc21wxWzlOzrb+E6jiUucx","resourceUtilOld",void 0);t.ccclass,e("ResourceUtil",function(){function e(){}return e.loadRes=function(e,n,t){void 0===t&&(t=function(){}),o.load(e,(function(e,n){if(e)return r(e.message||e),void t(e,n);t&&t(null,n)}))},e.loadResType=function(e,n){return new Promise((function(t,i){o.load(e,n,(function(e,n){if(e)return r(e.message||e),void(i&&i(e));t&&t(n)}))}))},e.getUIPrefabRes=function(e,n){this.loadRes("prefab/ui/"+e,i,n)},e.createUI=function(e,n,t){this.getUIPrefabRes(e,(function(e,t){if(!e){var o=a(t);o.setPosition(0,0,0);s("Canvas").addChild(o),n&&n(null,o)}}))},e.loadEffectRes=function(e){var n=this;return new Promise((function(t,o){n.loadRes("prefab/effect/"+e,i,(function(n,r){if(n)return console.error("effect load failed",e),void(o&&o());t&&t(r)}))}))},e.loadModelRes=function(e){var n=this;return new Promise((function(t,o){n.loadRes("prefab/model/"+e,i,(function(n,r){if(n)return console.error("model load failed",e),void(o&&o());t&&t(r)}))}))},e.loadModelResArr=function(e,n,t,r){var a=n.map((function(n){return e+"/"+n}));o.load(a,i,t,r)},e.loadSpriteFrameRes=function(e){var n=this;return new Promise((function(t,o){n.loadRes(e,f,(function(n,r){if(n)return console.error("spriteFrame load failed!",e,n),void(o&&o());var i=new l;i.image=r;var a=new f;a.texture=i,t&&t(a)}))}))},e.loadSpriteFrameURL=function(e,n){u.loadRemote(e,(function(t,o){if(t)console.error("spriteFrame load failed!",e,t);else{var r=new l;r.image=o;var i=new f;i.texture=r,n.spriteFrame=i}}))},e.getMap=function(e,n){var t="map";t+=e>=100?e:e>=10?"0"+e:"00"+e,this.loadRes("map/config/"+t,null,(function(e,t){if(e)n(e,t);else{var o="";if(t._file){window.LZString&&(o=window.LZString.decompressFromEncodedURIComponent(t._file));var r=JSON.parse(o);n(null,r)}else if(t.text){window.LZString&&(o=window.LZString.decompressFromEncodedURIComponent(t.text));r=JSON.parse(o);n(null,r)}else t.json?n(null,t.json):n("failed")}}))},e.getMapObj=function(e,n,t,r){for(var a=[],s=0;s<n.length;s++)a.push("map/"+e+"/"+n[s]);o.load(a,i,t,r)},e.getJsonData=function(e,n){this.loadRes("datas/"+e,null,(function(e,t){e?r(e.message||e):t.json?n(e,t.json):n("failed!!!")}))},e.getTextData=function(e,n){this.loadRes("datas/"+e,null,(function(e,t){if(e)r(e.message||e);else{var o=t.text;n(e,o)}}))},e.setSpriteFrame=function(e,n,t){this.loadRes(e+"/spriteFrame",f,(function(o,r){if(o)return console.error("set sprite frame failed! err:",e,o),void t(o);n&&c(n)&&(n.spriteFrame=r,t(null))}))},e.getEffectPrefab=function(e,n){this.loadRes("prefab/effect/"+e+"/"+e,i,n)},e}());n._RF.pop()}}}));

System.register("chunks:///_virtual/self_skill.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Skill.ts","./Constant.ts","./EffectManager.ts"],(function(t){var o,n,e,i,l,s,r;return{setters:[function(t){o=t.inheritsLoose},function(t){n=t.cclegacy,e=t.v3,i=t.Vec3},function(t){l=t.Skill},function(t){s=t.Constant},function(t){r=t.EffectManager}],execute:function(){n._RF.push({},"f74a8DPUd9BqI1oMfrzlCGK","self_skill",void 0);t("self_skill",function(t){function n(){return t.apply(this,arguments)||this}return o(n,t),n.prototype.use=function(t,o){var n=this;if(!o)return console.log("敌人已死亡或找不到"),null;if(!this.isAvailable())return console.log("技能正在冷却中！"),null;this.lastUsedTime=Date.now();var l=t.node.name,a=o.name;console.log("self",a);var c,u=t.node,f=o,g=t.actor.actorProperty,p=t.actor,d=o.getComponent("ActorActionCon");(p.changeState(s.ACTION.Magic),this.effect1)&&(null==(c=r.instance)||c.play(this.effect1,e(u.worldPosition.x,5,u.worldPosition.z),u.forward));return setTimeout((function(){var o=n.level-1;g.mp-=n.mpCost[o];var r=n.damageBase[o]+(t.ap||0)*n.ratio;console.log(l+" 向 "+a+"使用了"+n.name+"，造成 "+r.toFixed(2)+" 魔法伤害");var c=e();console.log(u.worldPosition,f.worldPosition),i.subtract(c,u.worldPosition,f.worldPosition),c.normalize(),d.hurt(r,u.getComponent("ActorActionCon"),c),d.changeState(s.ACTION.Hit)}),1e3*this.hitMoment),!0},n}(l));n._RF.pop()}}}));

System.register("chunks:///_virtual/Setting.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Constant.ts","./PlayerPreference.ts"],(function(t){var e,n,o,s,u,i,l,c;return{setters:[function(t){e=t.inheritsLoose,n=t.createClass},function(t){o=t.cclegacy,s=t._decorator,u=t.math,i=t.EventTarget},function(t){l=t.Constant},function(t){c=t.PlayerPreference}],execute:function(){var r,m;o._RF.push({},"df3cbyjRsZA2KUI+D6WHwj5","Setting",void 0);var a=s.ccclass;t("Setting",a("Setting")(((m=function(t){function o(){for(var e,n=arguments.length,o=new Array(n),s=0;s<n;s++)o[s]=arguments[s];return(e=t.call.apply(t,[this].concat(o))||this)._bgmVolume=1,e._sfxVolume=1,e}return e(o,t),o.prototype.load=function(){this._bgmVolume=c.getFloat("bgmVolume"),isNaN(this._bgmVolume)&&(this._bgmVolume=1),this._sfxVolume=c.getFloat("sfxVolume"),isNaN(this._sfxVolume)&&(this._sfxVolume=1)},n(o,[{key:"bgmVolume",get:function(){return this._bgmVolume},set:function(t){this._bgmVolume=u.clamp01(t),c.setFloat("bgmVolume",t),this.emit(l.EVENT_NAME.onBgmVolumeChanged,this._bgmVolume)}},{key:"sfxVolume",get:function(){return this._sfxVolume},set:function(t){this._sfxVolume=u.clamp01(t),c.setFloat("sfxVolume",t)}}],[{key:"instance",get:function(){return this._instance}}]),o}(i))._instance=new m,r=m))||r);o._RF.pop()}}}));

System.register("chunks:///_virtual/Skill.ts",["cc","./TimeUtil.ts","./Util.ts"],(function(t){var i,e,s;return{setters:[function(t){i=t.cclegacy},function(t){e=t.TimeUtil},function(t){s=t.Util}],execute:function(){i._RF.push({},"316e4UTbP1HYK8aM0ufKHpR","Skill",void 0);t("Skill",function(){function t(t){this.duration=void 0,this.hitMoment=void 0,this.cd=void 0,this.damageBase=void 0,this.description=void 0,this.hpCost=void 0,this.iconIndex=void 0,this.iconPath=void 0,this.id=void 0,this.lastUsedTime=void 0,this.level=void 0,this.mpCost=void 0,this.name=void 0,this.ratio=void 0,this.targetGroup=void 0,this.targetSelect=void 0,this.type=void 0,this.version=void 0,this.propertyString=void 0,this.propertyValue=void 0,this.effect1=void 0,this.duration=t.duration,this.hitMoment=t.hitMoment,this.description=t.description,this.iconIndex=t.iconIndex,this.iconPath=t.iconPath,this.id=t.id,this.lastUsedTime=t.lastUsedTime,this.level=t.level,this.name=t.name,this.targetGroup=t.targetGroup,this.targetSelect=t.targetSelect,this.type=t.type,this.version=t.version,this.propertyString=t.propertyString,this.propertyValue=t.propertyValue,this.effect1=t.effect1,this.ratio=s.formatNumToFixed(t.ratio,2),this.hpCost=s._stringToArrayByComma(t.hpCost),this.mpCost=s._stringToArrayByComma(t.mpCost),this.cd=s._stringToArrayByComma(t.cd),this.damageBase=s._stringToArrayByComma(t.damageBase)}var i=t.prototype;return i.isAvailable=function(){var t=this.cd[this.level-1];return Date.now()-this.lastUsedTime>=1e3*t&&t>0},i.use=function(t,i){return this.lastUsedTime=Date.now(),console.log("skill used",this.name,e.formatDate(this.lastUsedTime)),null},t}());i._RF.pop()}}}));

System.register("chunks:///_virtual/SkillCon.ts",["./rollupPluginModLoBabelHelpers.js","cc","./ResourceUtil.ts","./brand_e.ts","./brand_passive.ts","./brand_q.ts","./brand_r.ts","./brand_w.ts","./add_attribute.ts","./other.ts","./self_skill.ts"],(function(n){var t,e,i,s,r,l,a,o,c,u,h,f,d,k,p,_,g;return{setters:[function(n){t=n.inheritsLoose,e=n.createClass,i=n.asyncToGenerator,s=n.regeneratorRuntime},function(n){r=n.cclegacy,l=n._decorator,a=n.Component,o=n.JsonAsset},function(n){c=n.ResourceUtil},function(n){u=n.brand_e},function(n){h=n.brand_passive},function(n){f=n.brand_q},function(n){d=n.brand_r},function(n){k=n.brand_w},function(n){p=n.add_attribute},function(n){_=n.other},function(n){g=n.self_skill}],execute:function(){var b,v;r._RF.push({},"a60e1UknklGlLMfSLFGxyMV","SkillCon",void 0);var w=l.ccclass;l.property,n("SkillCon",w("SkillCon")(((v=function(n){function r(){for(var t,e=arguments.length,i=new Array(e),s=0;s<e;s++)i[s]=arguments[s];return(t=n.call.apply(n,[this].concat(i))||this).skillList=[],t.skillInitList=[],t.skillChoiceList=[],t}t(r,n);var l=r.prototype;return l.initSkills=function(){var n=i(s().mark((function n(){var t,e,i,r;return s().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,c.loadResType("data/skill",o);case 2:for(t=n.sent,e=t.json.RECORDS,i=0;i<e.length;i++)r=new p(e[i]),this.skillList.push(r),this.skillInitList.push({id:e[i].id,name:e[i].name,iconPath:e[i].iconPath,skill:e[i]});this.skillChoiceList=JSON.parse(JSON.stringify(this.skillInitList));case 6:case"end":return n.stop()}}),n,this)})));return function(){return n.apply(this,arguments)}}(),l.initAutoSkills=function(){var n=i(s().mark((function n(){var t,e,i,r;return s().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,c.loadResType("data/skill",o);case 2:for(t=n.sent,e=t.json.RECORDS,i=0;i<e.length;i++)r=this.matchingSkill(e[i].class,e[i]),console.log("技能自动转化"),this.skillList.push(r),this.skillInitList.push({id:r.id,name:r.name,iconPath:r.iconPath,skill:r});this.skillChoiceList=JSON.parse(JSON.stringify(this.skillInitList));case 6:case"end":return n.stop()}}),n,this)})));return function(){return n.apply(this,arguments)}}(),l.matchingSkill=function(n,t){switch(n){case"add_attribute":return new p(t);case"brand_passive":return new h(t);case"brand_q":return new f(t);case"brand_w":return new k(t);case"brand_e":return new u(t);case"brand_r":return new d(t);case"other":return new _(t);case"self_skill":return new g(t)}},l.getRandomStates=function(n,t){if(0==n.length)return console.log("没有可供选择的技能"),null;n.length<t&&console.log("可供选择的技能数不足");for(var e=n.concat(),i=[];i.length<t&&0!=e.length;){var s=Math.floor(Math.random()*e.length),r=e[s];i.push(r),e.splice(s,1)}return i},l.getSkillById=function(n){return console.log("SkillCon.ts获取技能"),this.skillList.find((function(t){return t.id===n}))},e(r,null,[{key:"instance",get:function(){return null==this._instance&&(this._instance=new r),this._instance}}]),r}(a))._instance=void 0,b=v))||b);r._RF.pop()}}}));

System.register("chunks:///_virtual/StorageManager.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Util.ts"],(function(t){var a,s,n,e,i,o,r;return{setters:[function(t){a=t.createClass},function(t){s=t.cclegacy,n=t._decorator,e=t.sys,i=t.log,o=t.native},function(t){r=t.Util}],execute:function(){var c,h;s._RF.push({},"71a46xZIwVAE7fhHVE4bghe","StorageManager",void 0);var u=n.ccclass;t("StorageManager",u("StorageManager")(((h=function(){function t(){this._jsonData={},this._path=null,this.KEY_CONFIG="template",this._markSave=!1,this._saveTimer=-1}var s=t.prototype;return s.start=function(){var t;if(this._jsonData={userId:""},this._path=this._getConfigPath(),e.isNative||(t=e.localStorage.getItem(this.KEY_CONFIG)),i("content",t),t&&t.length){t.startsWith("@")&&(t=t.substring(1),t=r.decrypt(t));try{var a=JSON.parse(t);i("content1",a),this._jsonData=a}catch(t){}}},s.setConfigDataWithoutSave=function(t,a){var s=this._jsonData.userId;this._jsonData[s]?this._jsonData[s][t]=a:console.error("no account can not save")},s.setConfigData=function(t,a){this.setConfigDataWithoutSave(t,a),this._markSave=!0},s.getConfigData=function(t){var a=this._jsonData.userId;if(this._jsonData[a]){var s=this._jsonData[a][t];return s||""}return i("no account can not load"),""},s.setGlobalData=function(t,a){this._jsonData[t]=a,this.save()},s.getGlobalData=function(t){return this._jsonData[t]},s.setUserId=function(t){this._jsonData.userId=t,this._jsonData[t]||(this._jsonData[t]={}),this.save()},s.getUserId=function(){return this._jsonData.userId},s.scheduleSave=function(){this._markSave&&this.save()},s.markModified=function(){this._markSave=!0},s.save=function(){var t=JSON.stringify(this._jsonData),a="@"+r.encrypt(t);if(this._markSave=!1,e.isNative){var s={};s[this.KEY_CONFIG]=a,o.fileUtils.writeValueMapToFile(s,this._path)}else{console.log("浏览器|cocos"),e.localStorage.setItem(this.KEY_CONFIG,a)}},s._getConfigPath=function(){var t=e.platform,a="";return t===e.OS.WINDOWS?a="src/conf":t===e.OS.LINUX?a="./conf":e.isNative?(a=o.fileUtils.getWritablePath(),a+="conf"):a="src/conf",console.log(a),a},a(t,null,[{key:"instance",get:function(){return this._instance||(this._instance=new t,this._instance.start()),this._instance}}]),t}())._instance=void 0,c=h))||c);s._RF.pop()}}}));

System.register("chunks:///_virtual/TimeUtil.ts",["cc"],(function(t){var e;return{setters:[function(t){e=t.cclegacy}],execute:function(){e._RF.push({},"a5a68DPZVRAqIPap0pg6X+n","TimeUtil",void 0);t("TimeUtil",function(){function t(){}return t.formatDate=function(t){var e=new Date(t);return e.getFullYear()+"-"+(e.getMonth()+1).toString().padStart(2,"0")+"-"+e.getDate().toString().padStart(2,"0")+" "+e.getHours().toString().padStart(2,"0")+":"+e.getMinutes().toString().padStart(2,"0")+":"+e.getSeconds().toString().padStart(2,"0")},t}());e._RF.pop()}}}));

System.register("chunks:///_virtual/Trigger.ts",["cc"],(function(){var e;return{setters:[function(r){e=r.cclegacy}],execute:function(){e._RF.push({},"866abyEBfJLyaIhfh7p303F","Trigger",void 0),e._RF.pop()}}}));

System.register("chunks:///_virtual/UIGame.ts",["./rollupPluginModLoBabelHelpers.js","cc","./UILevelCon.ts","./ActorCon.ts","./Constant.ts","./UiManager.ts","./SkillCon.ts"],(function(e){var t,n,o,i,a,r,l,s,p,u,c,h,g,f,y,d,m,C,P,S,v,E,N,b;return{setters:[function(e){t=e.applyDecoratedDescriptor,n=e.inheritsLoose,o=e.initializerDefineProperty,i=e.assertThisInitialized,a=e.createForOfIteratorHelperLoose},function(e){r=e.cclegacy,l=e._decorator,s=e.ProgressBar,p=e.Node,u=e.Prefab,c=e.Layout,h=e.Pool,g=e.instantiate,f=e.resources,y=e.director,d=e.Label,m=e.SpriteAtlas,C=e.Sprite,P=e.Component},function(e){S=e.UILevelCon},function(e){v=e.ActorCon},function(e){E=e.Constant},function(e){N=e.UiManager},function(e){b=e.SkillCon}],execute:function(){var k,x,B,A,I,U,w,D,G,L,_,M,F,H,T;r._RF.push({},"61595gcW8FHeKQmYGUbeD0k","UIGame",void 0);var V=l.ccclass,z=l.property;e("UIGame",(k=V("UIGame"),x=z(s),B=z(S),A=z(s),I=z(p),U=z(p),w=z(u),k((L=t((G=function(e){function t(){for(var t,n=arguments.length,a=new Array(n),r=0;r<n;r++)a[r]=arguments[r];return t=e.call.apply(e,[this].concat(a))||this,o(t,"expBar",L,i(t)),o(t,"expLabel",_,i(t)),o(t,"hpBar",M,i(t)),o(t,"ShowData",F,i(t)),t.isPaused=!1,t.labelPause=null,t.btnSetting=null,o(t,"SkillPanel",H,i(t)),t.playerCon=null,o(t,"skillPrefab",T,i(t)),t.skillPool=null,t.layout=void 0,t}n(t,e);var r=t.prototype;return r.start=function(){var e=this;b.instance.initAutoSkills();var t=v.instance.playerActor.node;console.log("监听升级事件",t),t.on(E.EVENT_NAME.onExpGain,this.onExpGain,this),t.on(E.EVENT_NAME.onPlayerUpgrade,this.onUpgrade,this),t.on(E.EVENT_NAME.onHurt,this.onHurt,this),t.on(E.EVENT_NAME.updatePlayerInfo,this.updatePlayerInfo,this),this.updatePlayerInfo(),this.onExpGain(),this.playerCon=v.instance.playerActor.getComponent("PlayerCon").node,this.layout=this.SkillPanel.getComponent(c),this.skillPool=new h((function(){var t=g(e.skillPrefab);return t.active=!1,t}),1,(function(e){e.removeFromParent()}))},r.onDestroy=function(){var e=v.instance.playerActor.node;e.off(E.EVENT_NAME.onExpGain,this.onExpGain,this),e.off(E.EVENT_NAME.onPlayerUpgrade,this.onUpgrade,this),e.off(E.EVENT_NAME.onHurt,this.onHurt,this),e.off(E.EVENT_NAME.updatePlayerInfo,this.updatePlayerInfo,this)},r.onExitGame=function(){f.releaseAll()},r.onPauseGame=function(){y.isPaused()?y.resume():y.pause()},r.onOpenSetting=function(){},r.onUpgrade=function(){N.instance.showDialog(E.DIALOG_DEF.UISkillUpgrade)},r.updatePlayerInfo=function(){if(v.instance.playerActor){var e=v.instance.playerActor.actorProperty;this.ShowData.getChildByName("maxHp").getChildByName("Content").getComponent(d).string=e.hp.toString(),this.ShowData.getChildByName("attack").getChildByName("Content").getComponent(d).string=e.attack.toString(),this.ShowData.getChildByName("level").getChildByName("Content").getComponent(d).string=e.level.toString(),this.ShowData.getChildByName("chaseRate").getChildByName("Content").getComponent(d).string=e.chaseRate.toString(),this.ShowData.getChildByName("penetration").getChildByName("Content").getComponent(d).string=e.penetration.toString(),this.ShowData.getChildByName("projectileCount").getChildByName("Content").getComponent(d).string=e.projectileCount.toString(),this.resetSkill()}},r.onExpGain=function(){if(v.instance.playerActor){var e=v.instance.playerActor.actorProperty;this.expBar.progress=e.exp/e.maxExp,this.expLabel.string=e.exp.toFixed()+"/"+e.maxExp.toFixed()}},r.onHurt=function(e){this.hpBar.progress=e.hpPercent},r.clearSkill=function(){for(var e,t=a(this.SkillPanel.children);!(e=t()).done;){var n=e.value;n.active=!1,this.skillPool.free(n)}},r.resetSkill=function(){var e=this;console.log("resetSkill"),this.clearSkill();f.load("ui/art/skill/texture",m,(function(t,n){var o=e.playerCon.getComponent("PlayerCon");o=o.skillList;for(var i=0;i<o.length;i++)if(!o[i].propertyValue){var a=n.getSpriteFrame(o[i].iconPath),r=e.skillPool.alloc();null==r.parent&&e.SkillPanel.addChild(r),r.active=!0;var l=r.getComponent("UISkillBtnUsed");l.cdNum=o[i].cd[o[i].level-1],l.skill=o[i],r.getChildByName("des").getComponent(d).string=o[i].description;var s=o[i].level-1,p="等级:"+o[i].level+",cd:"+o[i].cd[s]+",消耗:"+(o[i].hpCost,o[i].mpCost[s]);r.getChildByName("mana").getComponent(d).string=p,r.setSiblingIndex(i),r.getComponent(C).spriteFrame=a}e.layout.updateLayout()}))},t}(P)).prototype,"expBar",[x],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),_=t(G.prototype,"expLabel",[B],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),M=t(G.prototype,"hpBar",[A],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),F=t(G.prototype,"ShowData",[I],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),H=t(G.prototype,"SkillPanel",[U],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),T=t(G.prototype,"skillPrefab",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),D=G))||D));r._RF.pop()}}}));

System.register("chunks:///_virtual/UIJoyStick.ts",["./rollupPluginModLoBabelHelpers.js","cc","./VirtualInput.ts"],(function(t){var i,o,n,e,r,s,c,h,u,a,l,d,p,y;return{setters:[function(t){i=t.applyDecoratedDescriptor,o=t.inheritsLoose,n=t.initializerDefineProperty,e=t.assertThisInitialized},function(t){r=t.cclegacy,s=t._decorator,c=t.Sprite,h=t.CCFloat,u=t.v3,a=t.Input,l=t.Vec3,d=t.math,p=t.Component},function(t){y=t.VirtualInput}],execute:function(){var T,f,v,g,S,E,U,b,m;r._RF.push({},"8f213P7tURJ96W+ymkx2Mgx","UIJoyStick",void 0);var k=s.ccclass,C=s.property;t("UIJoyStick",(T=k("UIJoyStick"),f=C(c),v=C(c),g=C(h),T((U=i((E=function(t){function i(){for(var i,o=arguments.length,r=new Array(o),s=0;s<o;s++)r[s]=arguments[s];return i=t.call.apply(t,[this].concat(r))||this,n(i,"thumbnail",U,e(i)),n(i,"joyStickBg",b,e(i)),n(i,"radius",m,e(i)),i.initJoyStickBgPosition=u(),i}o(i,t);var r=i.prototype;return r.start=function(){this.node.on(a.EventType.TOUCH_MOVE,this.onTouchMove,this),this.node.on(a.EventType.TOUCH_END,this.onTouchEnd,this),this.node.on(a.EventType.TOUCH_CANCEL,this.onTouchEnd,this),this.node.on(a.EventType.TOUCH_START,this.onTouchStart,this),this.initJoyStickBgPosition=this.joyStickBg.node.worldPosition.clone()},r.onDestroy=function(){this.node.off(a.EventType.TOUCH_MOVE,this.onTouchMove,this),this.node.off(a.EventType.TOUCH_END,this.onTouchEnd,this),this.node.off(a.EventType.TOUCH_CANCEL,this.onTouchEnd,this),this.node.off(a.EventType.TOUCH_START,this.onTouchStart,this)},r.onTouchStart=function(t){var i=t.touch.getUILocationX(),o=t.touch.getUILocationY();this.joyStickBg.node.setWorldPosition(i,o,0)},r.onTouchMove=function(t){var i=t.touch.getUILocationX(),o=t.touch.getUILocationY(),n=new l(i,o,0),e=u();this.joyStickBg.node.inverseTransformPoint(e,n);var r=u(),s=e.length();e.normalize(),l.scaleAndAdd(r,u(),e,d.clamp(s,0,this.radius)),this.thumbnail.node.setPosition(r),y.horizontal=this.thumbnail.node.position.x/this.radius,y.vertical=this.thumbnail.node.position.y/this.radius},r.onTouchEnd=function(t){this.thumbnail.node.setPosition(u()),y.horizontal=0,y.vertical=0,this.joyStickBg.node.worldPosition=this.initJoyStickBgPosition},i}(p)).prototype,"thumbnail",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),b=i(E.prototype,"joyStickBg",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),m=i(E.prototype,"radius",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 130}}),S=E))||S));r._RF.pop()}}}));

System.register("chunks:///_virtual/UILevelCon.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(e){var t,n,r,o,i,a,s,u,l,c,p,f,v,g,h,d;return{setters:[function(e){t=e.applyDecoratedDescriptor,n=e.inheritsLoose,r=e.initializerDefineProperty,o=e.assertThisInitialized,i=e.createForOfIteratorHelperLoose,a=e.createClass},function(e){s=e.cclegacy,u=e._decorator,l=e.Layout,c=e.Prefab,p=e.Pool,f=e.instantiate,v=e.resources,g=e.SpriteFrame,h=e.Sprite,d=e.Component}],execute:function(){var m,y,P,b,C,L;s._RF.push({},"0f5c6stgBdPQoZxOb1seokE","UILevelCon",void 0);var S=u.ccclass,_=u.property,F=u.requireComponent,I=new Map;I.set("/","Slash");e("UILevelCon",(m=S("UILevelCon"),y=F(l),P=_(c),m(b=y((L=t((C=function(e){function t(){for(var t,n=arguments.length,i=new Array(n),a=0;a<n;a++)i[a]=arguments[a];return(t=e.call.apply(e,[this].concat(i))||this)._string="",r(t,"numPrefab",L,o(t)),t.numPool=null,t.layout=void 0,t}n(t,e);var s=t.prototype;return s.onLoad=function(){var e=this;this.layout=this.node.getComponent(l),this.numPool=new p((function(){var t=f(e.numPrefab);return t.active=!1,t}),1,(function(e){e.removeFromParent()}))},s.onDestroy=function(){this.numPool.destroy()},s.clearString=function(){for(var e,t=i(this.node.children);!(e=t()).done;){var n=e.value;n.active=!1,this.numPool.free(n)}},s.resetString=function(){var e=this;this.clearString();var t="ui/art/num/";v.loadDir(t,(function(){for(var n=0;n<e.string.length;n++){var r=e.string[n].toString();I.has(r)&&(r=I.get(r));var o=t+r+"/spriteFrame",i=v.get(o,g),a=e.numPool.alloc();null==a.parent&&e.node.addChild(a),a.active=!0,a.setSiblingIndex(n),a.getComponent(h).spriteFrame=i}e.layout.updateLayout()}))},a(t,[{key:"string",get:function(){return this._string},set:function(e){this._string!=e&&(this._string=e,this.resetString())}}]),t}(d)).prototype,"numPrefab",[P],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),b=C))||b)||b));s._RF.pop()}}}));

System.register("chunks:///_virtual/UILobby.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(o){var n,t,c,e,i;return{setters:[function(o){n=o.inheritsLoose},function(o){t=o.cclegacy,c=o._decorator,e=o.director,i=o.Component}],execute:function(){var r;t._RF.push({},"31b21rGA0xLMJJHpn8z5BOS","UILobby",void 0);var u=c.ccclass;o("UILobby",u("UILobby")(r=function(o){function t(){return o.apply(this,arguments)||this}n(t,o);var c=t.prototype;return c.start=function(){},c.update=function(o){},c.show=function(){this.onPlay1()},c.onPlay1=function(){console.log("玩法1"),e.loadScene("fight",(function(){}))},c.onPlay2=function(){console.log("玩法2")},c.onPlay3=function(){console.log("玩法3")},t}(i))||r);t._RF.pop()}}}));

System.register("chunks:///_virtual/UiManager.ts",["./rollupPluginModLoBabelHelpers.js","cc","./ResourceUtil.ts","./PoolManager.ts","./UITips.ts","./Constant.ts","./UITransitionPanel.ts","./UITransitionBgPanel.ts"],(function(i){var n,t,o,e,a,s,r,c,h,p,l;return{setters:[function(i){n=i.createClass},function(i){t=i.cclegacy,o=i._decorator,e=i.isValid,a=i.find},function(i){s=i.ResourceUtil},function(i){r=i.PoolManager},function(i){c=i.UITips},function(i){h=i.Constant},function(i){p=i.UITransitionPanel},function(i){l=i.UITransitionBgPanel}],execute:function(){var u,g;t._RF.push({},"887cdGh1vxPKb2OPEJdJxoR","UiManager",void 0);var f=o.ccclass;i("UiManager",f("UiManager")(((g=function(){function i(){this._dictSharedPanel={},this._dictLoading={},this._arrPopupDialog=[],this._showTipsTime=0}var t=i.prototype;return t.isDialogVisible=function(i){if(!this._dictSharedPanel.hasOwnProperty(i))return!1;var n=this._dictSharedPanel[i];return e(n)&&n.active&&n.parent},t.showDialog=function(i,n,t,o){var r=this;if(console.log("2024年8月6日_001_A01","showDialog",i),!this._dictLoading[i]){var c=i.lastIndexOf("/"),h=i.slice(c+1);if(n||(n=[]),this._dictSharedPanel.hasOwnProperty(i)){var p=this._dictSharedPanel[i];if(e(p)){var l=null;l=a("UIRoot"),p.parent=l,p.active=!0;var u=p.getComponent(h),g=p.getComponent(h.charAt(0).toUpperCase()+h.slice(1));return void(u&&u.show?(u.show.apply(u,n),t&&t(u)):g&&g.show?(g.show.apply(g,n),t&&t(g)):console.log("查找不到脚本文件"+h))}}else console.log(i,"_dictSharedPanel没有加载");this._dictLoading[i]=!0,s.createUI(i,(function(o,e){var a=!1;if(r._dictLoading[i]||(a=!0),r._dictLoading[i]=!1,o)console.error(o);else{r._dictSharedPanel[i]=e;var s=e.getComponent(h),c=e.getComponent(h.charAt(0).toUpperCase()+h.slice(1));s&&s.show?(s.show.apply(s,n),t&&t(s)):c&&c.show?(c.show.apply(c,n),t&&t(c)):console.log("查找不到脚本文件"+h),a&&r.hideDialog(i)}}),o)}},t.hideDialog=function(i,n){if(this._dictSharedPanel.hasOwnProperty(i)){var t=this._dictSharedPanel[i];if(t&&e(t)){var o=t.getComponent("animationUI");o?o.close((function(){t.parent=null,n&&"function"==typeof n&&n()})):(t.parent=null,n&&"function"==typeof n&&n())}else n&&"function"==typeof n&&n()}this._dictLoading[i]=!1},t.pushToPopupSeq=function(i,n,t){var o={panelPath:i,scriptName:n,param:t,isShow:!1};this._arrPopupDialog.push(o),this._checkPopupSeq()},t.insertToPopupSeq=function(i,n,t){var o={panelPath:n,param:t,isShow:!1};this._arrPopupDialog.splice(i,0,o)},t.shiftFromPopupSeq=function(i){var n=this;this.hideDialog(i,(function(){n._arrPopupDialog[0]&&n._arrPopupDialog[0].panelPath===i&&(n._arrPopupDialog.shift(),n._checkPopupSeq())}))},t._checkPopupSeq=function(){if(this._arrPopupDialog.length>0){var i=this._arrPopupDialog[0];i.isShow||(this.showDialog(i.panelPath,i.param),this._arrPopupDialog[0].isShow=!0)}},t.showTips=function(i,n){var t=this,o=String(i),e=function(){t._showTipsAni(o,n)},a=Date.now();if(a-this._showTipsTime<800){var s=800-(a-this._showTipsTime);setTimeout((function(){e()}),s),this._showTipsTime=a+s}else e(),this._showTipsTime=a},t._showTipsAni=function(i,n){s.getUIPrefabRes("common/tips",(function(t,o){t||r.instance.getNode(o,a("Canvas")).getComponent(c).show(i,n)}))},t.showTransition=function(i){s.getUIPrefabRes(h.PANEL_NAME.TRANSITION,(function(n,t){n||r.instance.getNode(t,a("")).getComponent(p).show(i)}))},t.showTransitionBg=function(i){s.getUIPrefabRes(h.PANEL_NAME.TRANSITION_BG,(function(n,t){n||r.instance.getNode(t,a("Canvas/ui/tip")).getComponent(l).show(i)}))},n(i,null,[{key:"instance",get:function(){return this._instance||(this._instance=new i),this._instance}}]),i}())._instance=void 0,u=g))||u);t._RF.pop()}}}));

System.register("chunks:///_virtual/UISkillBtn.ts",["./rollupPluginModLoBabelHelpers.js","cc","./SkillCon.ts","./ActorCon.ts","./Constant.ts"],(function(t){var e,n,o,r,i,l,a,s,c,u,p,f,d,h,y,m,v,g,k,C,P,S,b,B;return{setters:[function(t){e=t.applyDecoratedDescriptor,n=t.inheritsLoose,o=t.initializerDefineProperty,r=t.assertThisInitialized,i=t.createForOfIteratorHelperLoose,l=t.createClass},function(t){a=t.cclegacy,s=t._decorator,c=t.Prefab,u=t.Layout,p=t.Pool,f=t.instantiate,d=t.director,h=t.resources,y=t.SpriteAtlas,m=t.error,v=t.Sprite,g=t.Label,k=t.EventHandler,C=t.Button,P=t.Component},function(t){S=t.SkillCon},function(t){b=t.ActorCon},function(t){B=t.Constant}],execute:function(){var L,_,A,D,E;a._RF.push({},"dedc9CfJDZKyZZ3KBuTulJN","UISkillBtn",void 0);var I=s.ccclass,F=s.property;t("UISkillBtn",(L=I("UISkillBtn"),_=F(c),L((E=e((D=function(t){function e(){for(var e,n=arguments.length,i=new Array(n),l=0;l<n;l++)i[l]=arguments[l];return(e=t.call.apply(t,[this].concat(i))||this)._num=3,o(e,"btnPrefab",E,r(e)),e.skillPool=null,e.layout=void 0,e}n(e,t);var a=e.prototype;return a.onLoad=function(){var t=this;this.layout=this.node.getComponent(u),this.skillPool=new p((function(){var e=f(t.btnPrefab);return e.active=!1,e}),1,(function(t){t.removeFromParent()})),this.resetSkill()},a.onDestroy=function(){this.skillPool.destroy()},a.onEnable=function(){d.pause()},a.onDisable=function(){d.resume()},a.clearSkill=function(){for(var t,e=i(this.node.children);!(t=e()).done;){var n=t.value;n.active=!1,this.skillPool.free(n)}},a.resetSkill=function(){var t=this;this.clearSkill();var e=S.instance,n=e.getRandomStates(e.skillChoiceList,3);n?h.load("ui/art/skill/texture",y,(function(e,o){if(console.log("加载资源"),e)m(e.message||e);else{for(var r=0;r<n.length;r++){var i=o.getSpriteFrame(n[r].iconPath),l=t.skillPool.alloc();null==l.parent&&t.node.addChild(l),l.active=!0,l.getComponent(v).spriteFrame=i,l.getChildByName("des").getComponent(g).string=n[r].name;var a=new k;a.target=b.instance.playerActor.getComponent("PlayerCon").node,a.component="PlayerCon",a.handler="gainSkill",a.customEventData=n[r].id,l.getComponent(C).clickEvents.push(a)}t.layout.updateLayout()}})):(b.instance.playerActor.getComponent("PlayerCon").node.emit(B.EVENT_NAME.updatePlayerInfo),this.node.parent.destroy())},l(e,[{key:"num",get:function(){return this._num},set:function(t){this._num=t}}]),e}(P)).prototype,"btnPrefab",[_],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),A=D))||A));a._RF.pop()}}}));

System.register("chunks:///_virtual/UISkillBtnUsed.ts",["./rollupPluginModLoBabelHelpers.js","cc","./TimeUtil.ts","./Skill.ts","./ActorCon.ts"],(function(t){var e,i,o,n,a,l,s,c,r,u,h,d,p;return{setters:[function(t){e=t.applyDecoratedDescriptor,i=t.inheritsLoose,o=t.initializerDefineProperty,n=t.assertThisInitialized},function(t){a=t.cclegacy,l=t._decorator,s=t.Sprite,c=t.tween,r=t.Node,u=t.Component},function(t){h=t.TimeUtil},function(t){d=t.Skill},function(t){p=t.ActorCon}],execute:function(){var S,f,m,g,y,v,C;a._RF.push({},"c05bcJezVxIW7QnEL41m2uh","UISkillBtnUsed",void 0);var k=l.ccclass,N=l.property;t("UISkillBtnUsed",(S=k("UISkillBtnUsed"),f=N(Number),m=N(d),S((v=e((y=function(t){function e(){for(var e,i=arguments.length,a=new Array(i),l=0;l<i;l++)a[l]=arguments[l];return(e=t.call.apply(t,[this].concat(a))||this).cdSprite=void 0,e.autoSprite=void 0,e.autoRenderTime=.05,e.autoClick=!1,o(e,"cdNum",v,n(e)),o(e,"skill",C,n(e)),e}i(e,t);var a=e.prototype;return a.onLoad=function(){this.cdSprite=this.node.getChildByName("cd").getComponent(s),this.autoSprite=this.node.getChildByName("auto").getComponent(s),this.schedule(this.autoSchedule,this.autoRenderTime)},a.cdStart=function(){if(this.skill.isAvailable){console.log("cdStart"),this.cdStop();var t=p.instance.playerActor.getComponent("PlayerCon");t.projectileCount=0,this.skill.use(t,t.enemy)&&(console.log("缓动开始",h.formatDate(Date.now())),c(this.cdSprite).to(this.cdNum,{fillRange:1}).call((function(){})).start())}},a.cdStop=function(){this.cdSprite.fillRange=0},a.autoStart=function(){this.autoClick=!this.autoClick,console.log("autoStart",this.autoClick),this.autoClick?this.autoStop():this.schedule(this.autoSchedule,this.autoRenderTime)},a.autoSchedule=function(){parseFloat((1/this.cdNum*this.autoRenderTime).toFixed(2));this.autoSprite.fillRange+=.01,this.autoSprite.fillRange>=1&&(this.autoSprite.fillRange=0)},a.autoStop=function(){console.log("autoStop"),this.unschedule(this.autoSchedule)},a.start=function(){this.node.on(r.EventType.MOUSE_ENTER,this.onEnter,this),this.node.on(r.EventType.MOUSE_LEAVE,this.onLeave,this)},a.onEnter=function(){this.node.getChildByName("des").active=!0,this.node.getChildByName("mana").active=!0},a.onLeave=function(){this.node.getChildByName("des").active=!1,this.node.getChildByName("mana").active=!1},e}(u)).prototype,"cdNum",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 5}}),C=e(y.prototype,"skill",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),g=y))||g));a._RF.pop()}}}));

System.register("chunks:///_virtual/UIStart.ts",["./rollupPluginModLoBabelHelpers.js","cc","./UiManager.ts","./Constant.ts","./PlayerData.ts","./LanguageData.ts","./Util.ts"],(function(e){var n,t,i,a,o,l,r,u,s,c,g,d,h,p,N,b,f,E;return{setters:[function(e){n=e.applyDecoratedDescriptor,t=e.inheritsLoose,i=e.initializerDefineProperty,a=e.assertThisInitialized},function(e){o=e.cclegacy,l=e._decorator,r=e.Color,u=e.Node,s=e.Label,c=e.sp,g=e.Component},function(e){d=e.UiManager},function(e){h=e.Constant},function(e){p=e.PlayerData},function(e){N=e._language,b=e.init,f=e.updateSceneRenderers},function(e){E=e.Util}],execute:function(){var _,m,y,L,S,A,C,G,k,v,I,w,z,U,D,O,P;o._RF.push({},"83b2e+rACxD/rpQ4Mowx2m8","UIStart",void 0);var Z=l.ccclass,M=l.property,H={NONE:new r(255,255,255),CHOOSE:new r(0,0,0)};e("UIStart",(_=Z("UIStart"),m=M(u),y=M(u),L=M(u),S=M(u),A=M(u),C=M(s),G=M(s),_((I=n((v=function(e){function n(){for(var n,t=arguments.length,o=new Array(t),l=0;l<t;l++)o[l]=arguments[l];return n=e.call.apply(e,[this].concat(o))||this,i(n,"loadingNodeEn",I,a(n)),i(n,"loadingNodeZh",w,a(n)),i(n,"btnNode",z,a(n)),i(n,"dotNode",U,a(n)),i(n,"changeLanguageNode",D,a(n)),i(n,"languageZhLabel",O,a(n)),i(n,"languageEnLabel",P,a(n)),n.startSk=null,n._isClick=!1,n}t(n,e);var o=n.prototype;return o.onEnable=function(){},o.onDisable=function(){},o.onStartGame=function(){console.log("js_2024年7月31日_002_A06","onStartGame",this._isClick),this._isClick||(this._isClick=!0,this._loginGame())},o._loginGame=function(){console.log("js_2024年7月31日_002_A07","_loginGame"),d.instance.showDialog(h.PANEL_NAME.SELECT_GAME),d.instance.hideDialog(h.PANEL_NAME.START_GAME),this._isClick=!1},o.changeLanguage=function(){console.log("js_2024年7月31日_002_A09","changeLanguage");var e,n=this.dotNode.position;N===h.I18_LANGUAGE.CHINESE?(e=h.I18_LANGUAGE.ENGLISH,this.dotNode.setPosition(27,n.y,n.z),this.languageZhLabel.color=H.NONE,this.languageEnLabel.color=H.CHOOSE,this.loadingNodeEn.active=!0,this.loadingNodeZh.active=!1,this.startSk=this.loadingNodeEn.getComponent(c.Skeleton),this.startSk.addAnimation(0,"idle",!0)):(e=h.I18_LANGUAGE.CHINESE,this.dotNode.setPosition(-27,n.y,n.z),this.languageZhLabel.color=H.CHOOSE,this.languageEnLabel.color=H.NONE,this.loadingNodeEn.active=!1,this.loadingNodeZh.active=!0,this.startSk=this.loadingNodeZh.getComponent(c.Skeleton),this.startSk.addAnimation(0,"idle",!0)),b(e),f();var t=p.instance.playerInfo.playerName;E.randomName(t).then((function(e){p.instance.updatePlayerInfo("playerName",e)}))},n}(g)).prototype,"loadingNodeEn",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),w=n(v.prototype,"loadingNodeZh",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),z=n(v.prototype,"btnNode",[L],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),U=n(v.prototype,"dotNode",[S],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),D=n(v.prototype,"changeLanguageNode",[A],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),O=n(v.prototype,"languageZhLabel",[C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),P=n(v.prototype,"languageEnLabel",[G],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),k=v))||k));o._RF.pop()}}}));

System.register("chunks:///_virtual/UITips.ts",["./rollupPluginModLoBabelHelpers.js","cc","./PoolManager.ts"],(function(t){var e,n,i,o,s,r,a,p,l,c,u,h,d;return{setters:[function(t){e=t.applyDecoratedDescriptor,n=t.inheritsLoose,i=t.initializerDefineProperty,o=t.assertThisInitialized},function(t){s=t.cclegacy,r=t._decorator,a=t.LabelComponent,p=t.Vec3,l=t.UITransform,c=t.isValid,u=t.AnimationComponent,h=t.Component},function(t){d=t.PoolManager}],execute:function(){var f,g,v,y,T;s._RF.push({},"6cae50M0dBNs7ApLkciDO23","UITips",void 0);var m=r.ccclass,b=r.property;t("UITips",(f=m("UITips"),g=b(a),f((T=e((y=function(t){function e(){for(var e,n=arguments.length,s=new Array(n),r=0;r<n;r++)s[r]=arguments[r];return e=t.call.apply(t,[this].concat(s))||this,i(e,"lbTips",T,o(e)),e.targetPos=void 0,e}return n(e,t),e.prototype.show=function(t,e){var n,i,o=this;this.targetPos=new p(0,0,0),this.node.setPosition(this.targetPos),this.lbTips.string=t;var s=null==(n=this.lbTips.node.getComponent(l))?void 0:n.contentSize;if(c(s)){null==(i=this.node.getComponent(l))||i.setContentSize(s.width+100<240?240:s.width+100,s.height+30);var r=this.node.getComponent(u);r.play(),r.once(u.EventType.FINISHED,(function(){e&&e(),d.instance.putNode(o.node)}))}else d.instance.putNode(this.node)},e}(h)).prototype,"lbTips",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),v=y))||v));s._RF.pop()}}}));

System.register("chunks:///_virtual/UITransitionBgPanel.ts",["./rollupPluginModLoBabelHelpers.js","cc","./PoolManager.ts"],(function(n){var t,i,o,e,a,r,s,c,l,u;return{setters:[function(n){t=n.applyDecoratedDescriptor,i=n.inheritsLoose,o=n.initializerDefineProperty,e=n.assertThisInitialized},function(n){a=n.cclegacy,r=n._decorator,s=n.AnimationComponent,c=n.director,l=n.Component},function(n){u=n.PoolManager}],execute:function(){var p,I,T,f,N,d;a._RF.push({},"be626F0ZU9HSYfQb1UBsNof","UITransitionBgPanel",void 0);var y=r.ccclass,h=r.property;n("UITransitionBgPanel",(p=y("UITransitionBgPanel"),I=h(s),p(((d=function(n){function t(){for(var t,i=arguments.length,a=new Array(i),r=0;r<i;r++)a[r]=arguments[r];return t=n.call.apply(n,[this].concat(a))||this,o(t,"animation",N,e(t)),t}return i(t,n),t.prototype.show=function(n){var i=this;c.addPersistRootNode(this.node),this.animation.play(t.TRANSITION_IN),this.animation.once(s.EventType.FINISHED,(function(){i.animation.play(t.TRANSITION_OUT),i.animation.once(s.EventType.FINISHED,(function(){c.removePersistRootNode(i.node),u.instance.putNode(i.node),n&&n()}))}))},t}(l)).TRANSITION_IN="transitionIn",d.TRANSITION_OUT="transitionOut",N=t((f=d).prototype,"animation",[I],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),T=f))||T));a._RF.pop()}}}));

System.register("chunks:///_virtual/UITransitionPanel.ts",["./rollupPluginModLoBabelHelpers.js","cc","./PoolManager.ts","./EventListener.ts","./Constant.ts"],(function(n){var t,e,i,o,a,r,s,c,l,u,p,d;return{setters:[function(n){t=n.applyDecoratedDescriptor,e=n.inheritsLoose,i=n.initializerDefineProperty,o=n.assertThisInitialized},function(n){a=n.cclegacy,r=n._decorator,s=n.AnimationComponent,c=n.director,l=n.Component},function(n){u=n.PoolManager},function(n){p=n.EventListener},function(n){d=n.Constant}],execute:function(){var f,N,_,v,I,T;a._RF.push({},"634f6x7jK9G3p49sSayfHDp","UITransitionPanel",void 0);var h=r.ccclass,m=r.property;n("UITransitionPanel",(f=h("UITransitionPanel"),N=m(s),f(((T=function(n){function t(){for(var t,e=arguments.length,a=new Array(e),r=0;r<e;r++)a[r]=arguments[r];return t=n.call.apply(n,[this].concat(a))||this,i(t,"animation",I,o(t)),t._loadSceneOver=!1,t._sceneName="",t}e(t,n);var a=t.prototype;return a.show=function(n){var e=this;this._sceneName=n,c.addPersistRootNode(this.node),this._loadSceneOver=!1,this.animation.play(t.TRANSITION_IN),c.preloadScene(d.SCENE_NAME.SLECT,(function(){e._loadSceneOver=!0,e._transitionOut()}))},a._transitionOut=function(){if(this._loadSceneOver){var n=this;c.loadScene(this._sceneName,(function(){n.animation.play(t.TRANSITION_OUT),n.animation.once(s.EventType.FINISHED,(function(){c.removePersistRootNode(n.node),u.instance.putNode(n.node),p.dispatchEvent(d.EVENT_NAME.onGame321)}))}))}},t}(l)).TRANSITION_IN="transitionIn",T.TRANSITION_OUT="transitionOut",I=t((v=T).prototype,"animation",[N],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),_=v))||_));a._RF.pop()}}}));

System.register("chunks:///_virtual/Util.ts",["./rollupPluginModLoBabelHelpers.js","cc","./ResourceUtil.ts","./LanguageData.ts","./Constant.ts"],(function(r){var e,t,n,o,a,i,f,u,h;return{setters:[function(r){e=r.asyncToGenerator,t=r.regeneratorRuntime},function(r){n=r.cclegacy,o=r._decorator,a=r.randomRange,i=r.JsonAsset},function(r){f=r.ResourceUtil},function(r){u=r._language},function(r){h=r.Constant}],execute:function(){var c;n._RF.push({},"753b8Ci9l1DKZyLXbKnJ0jQ","Util",void 0);var s=o.ccclass;o.property,r("Util",s("Util")(c=function(){function r(){}return r.clone=function(r){if(null===r||"object"!=typeof r)return r;var e={};for(var t in r.constructor===Array&&(e=[]),r)r.hasOwnProperty(t)&&(e[t]=this.clone(r[t]));return e},r.isEmptyObject=function(r){var e=!0;if(r&&r.constructor===Object){for(var t in r)if(r.hasOwnProperty(t)){e=!1;break}}else e=!1;return e},r.getPropertyCount=function(r){var e,t=0;for(e in r)r.hasOwnProperty(e)&&t++;return t},r.rand=function(r){for(var e=this.clone(r),t=e.length-1;t>=0;t--){var n=Math.floor(Math.random()*(t+1)),o=e[n];e[n]=e[t],e[t]=o}return e},r.difference=function(r,e){var t=[];if(r.constructor!==Array||e.constructor!==Array)return t;for(var n=r.length,o=0;o<n;o++)-1===e.indexOf(r[o])&&t.push(r[o]);return t},r.objectToArray=function(r){var e=[];for(var t in r)r.hasOwnProperty(t)&&e.push(r[t]);return e},r.arrayToObject=function(r,e){var t={};for(var n in r)r.hasOwnProperty(n)&&r[n][e]&&(t[r[n][e]]=r[n]);return t},r.getWeightRandIndex=function(r,e){for(var t=Math.floor(Math.random()*e),n=0,o=0;o<r.length&&!(t<(n+=r[o]));o++);return o},r.getRandomNFromM=function(r,e){for(var t=[],n=0,o=0;o<e&&!(o>=r+1);){n=this.getRandomInt(0,r);for(var a=0,i=0;i<o;i++)if(t[i]===n){a=1;break}0===a&&(t[o]=n,o++)}return t},r.getRandomInt=function(r,e){var t=Math.random()*(e-r+1)+r;return Math.floor(t)},r.getStringLength=function(r){for(var e=r,t=0,n=0,o=e.length;n<o;n++){t+=e.charCodeAt(n)<=255?1:2}return Math.ceil(t/2)},r._stringToArrayByComma=function(r){if(r)return r.split(",").map((function(r){return Number(r.trim())}))},r._stringToArray=function(r){var e,t="\\ufe0e\\ufe0f",n="\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff",o=RegExp("[\\u200d\\ud800-\\udfff"+n+t+"]"),a="\\ud83c[\\udffb-\\udfff]",i="[\\ufe0e\\ufe0f]?",f="["+n+"]",u="(?:"+f+"|"+a+")"+"?",h="[\\ud800-\\udfff]",c="[^\\ud800-\\udfff]",s="(?:\\ud83c[\\udde6-\\uddff]){2}",g="[\\ud800-\\udbff][\\udc00-\\udfff]",d=i+u+("(?:\\u200d(?:"+[c,s,g].join("|")+")"+i+u+")*"),l="(?:"+[c+f+"?",f,s,g,h].join("|")+")",m=RegExp(a+"(?="+a+")|"+l+d,"g");return e=r,o.test(e)?function(r){return r.match(m)||[]}(r):function(r){return r.split("")}(r)},r.simulationUUID=function(){function r(){return Math.floor(65536*(1+Math.random())).toString(16).substring(1)}return r()+r()+"-"+r()+"-"+r()+"-"+r()+"-"+r()+r()+r()},r.trim=function(r){return r.replace(/(^\s*)|(\s*$)/g,"")},r.formatName=function(r,e){e=e||6;var t=this._stringToArray(r),n="";if(t.length>e){for(var o=0;o<e;o++)n+=t[o];n+="..."}else n=r;return n},r.formatMoney=function(r){for(var e=["","K","M","G","T","P","E","Z","Y","B","N","D"],t="",n=0;n<e.length;n++){if(!(r>=1e4)){t=Math.floor(r)+e[n];break}r/=1e3}return""===t&&(t=Math.floor(r)+"U"),t},r.formatValue=function(r){for(var e=[],t="",n=0;n<26;n++)e.push(String.fromCharCode(97+n));for(var o=0;o<e.length;o++){if(!(r>=1e4)){t=Math.floor(r)+e[o];break}r/=1e3}return t},r.isNewDay=function(r){var e=new Date(r),t=new Date,n=e.getYear(),o=e.getMonth(),a=e.getDate(),i=t.getYear(),f=t.getMonth(),u=t.getDate();return i>n||(f>o||u>a)},r.isNowValid=function(r,e){var t=new Date(r),n=new Date(e),o=!1;if(t.getDate()+""!="NaN"&&n.getDate()+""!="NaN"){var a=new Date;o=a<n&&a>t}return o},r.getDay=function(){var r=new Date;return r.getFullYear()+"-"+(r.getMonth()+1)+"-"+r.getDate()},r.getDeltaDays=function(r,e){r=new Date(r),e=new Date(e);var t=r.getFullYear(),n=r.getMonth()+1,o=r.getDate(),a=e.getFullYear(),i=e.getMonth()+1,f=e.getDate();r=new Date(t+"/"+n+"/"+o+" GMT+0800").getTime();var u=(e=new Date(a+"/"+i+"/"+f+" GMT+0800").getTime())-r;return Math.floor(u/864e5)},r.getOffsetMimutes=function(r,e){var t=e-r;return Math.floor(t%36e5/6e4)},r.formatDate=function(r,e){var t={"M+":r.getMonth()+1,"d+":r.getDate(),"h+":r.getHours(),"m+":r.getMinutes(),"s+":r.getSeconds(),"q+":Math.floor((r.getMonth()+3)/3),S:r.getMilliseconds()};for(var n in/(y+)/.test(e)&&(e=e.replace(RegExp.$1,(r.getFullYear()+"").substr(4-RegExp.$1.length))),t)new RegExp("("+n+")").test(e)&&(e=e.replace(RegExp.$1,1===RegExp.$1.length?t[n]:("00"+t[n]).substr((""+t[n]).length)));return e},r.formatTimeForSecond=function(r,e,t,n){void 0===e&&(e=!1),void 0===t&&(t=!1),void 0===n&&(n=!1);var o="",a=r%60,i=Math.floor(r/60);i=i<0?0:i;var f=Math.floor(i/60),u=i%60;return e||(f>0?(o+=f>9?f.toString():"0"+f,o+=":"):o+="00:"),t||(o+=u>9?u.toString():"0"+u,o+=":"),n||(o+=a>9?a.toString():"0"+a),o},r.formatTimeForMillisecond=function(r){var e=Math.floor(r/1e3%60),t=Math.floor(r/1e3/60%60);return{hour:Math.floor(r/1e3/60/60),minute:t,second:e}},r.getMin=function(r){var e=null;if(r.constructor===Array)for(var t=r.length,n=0;n<t;n++)e=0===n?Number(r[0]):e>Number(r[n])?Number(r[n]):e;return e},r.formatTwoDigits=function(r){return(Array(2).join(0)+r).slice(-2)},r.formatNumToFixed=function(r,e){if(void 0===e&&(e=0),r)return Number(r.toFixed(e))},r.lerp=function(r,e,t){void 0===t&&(t=.25);var n=e;return r>e?n=e+(r-e)*t:r<e&&(n=e-(e-r)*t),n},r.decrypt=function(r){var e=6;r.length%2==0&&(e=7);for(var t="",n=0;n<r.length-e;n+=2)t+=r[n+1],t+=r[n];return t+=r.slice(r.length-e+1),t=this._base64Decode(t)},r.encrypt=function(r){var e=this._base64encode(r),t=6;e.length%2==0&&(t=7);for(var n="",o=0;o<(e.length-t+1)/2;o++)n+=e[2*o+1],n+=e[2*o];return n+=e.slice(e.length-t+1)},r._base64encode=function(r){var e,t,n,o,a,i,f,u="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",h="",c=0;for(r=this._utf8Encode(r);c<r.length;)o=(e=r.charCodeAt(c++))>>2,a=(3&e)<<4|(t=r.charCodeAt(c++))>>4,i=(15&t)<<2|(n=r.charCodeAt(c++))>>6,f=63&n,isNaN(t)?i=f=64:isNaN(n)&&(f=64),h=h+u.charAt(o)+u.charAt(a)+u.charAt(i)+u.charAt(f);return h},r._base64Decode=function(r){var e,t,n,o,a,i,f="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",u="",h=0;for(r=r.replace(/[^A-Za-z0-9\+\/\=]/g,"");h<r.length;)e=f.indexOf(r.charAt(h++))<<2|(o=f.indexOf(r.charAt(h++)))>>4,t=(15&o)<<4|(a=f.indexOf(r.charAt(h++)))>>2,n=(3&a)<<6|(i=f.indexOf(r.charAt(h++))),u+=String.fromCharCode(e),64!=a&&(u+=String.fromCharCode(t)),64!=i&&(u+=String.fromCharCode(n));return u=this._utf8Decode(u)},r._utf8Encode=function(r){r=r.replace(/\r\n/g,"\n");for(var e="",t=0;t<r.length;t++){var n=r.charCodeAt(t);n<128?e+=String.fromCharCode(n):n>127&&n<2048?(e+=String.fromCharCode(n>>6|192),e+=String.fromCharCode(63&n|128)):(e+=String.fromCharCode(n>>12|224),e+=String.fromCharCode(n>>6&63|128),e+=String.fromCharCode(63&n|128))}return e},r._utf8Decode=function(r){for(var e="",t=0,n=0,o=0,a=0;t<r.length;)(n=r.charCodeAt(t))<128?(e+=String.fromCharCode(n),t++):n>191&&n<224?(o=r.charCodeAt(t+1),e+=String.fromCharCode((31&n)<<6|63&o),t+=2):(o=r.charCodeAt(t+1),a=r.charCodeAt(t+2),e+=String.fromCharCode((15&n)<<12|(63&o)<<6|63&a),t+=3);return e},r.checkIsLowPhone=function(){if(window.wx){var r=-1,e=window.wx.getSystemInfoSync();if(e.system.indexOf("iOS")>=0){for(var t=e.model,n=["iPhone1,1","iPhone1,2","iPhone2,1","iPhone3,1","iPhone3,3","iPhone4,1","iPhone5,1","iPhone5,2","iPhone5,3","iPhone5,4","iPhone6,1","iPhone6,2"],o=["iPhone6,2","iPhone7,1","iPhone7,2","iPhone8,1","iPhone8,2","iPhone8,4"],a=["iPhone9,1","iPhone9,2","iPhone9,3","iPhone9,4","iPhone10,1","iPhone10,2","iPhone10,3","iPhone10,4","iPhone10,5","iPhone10,6"],i=["iPhone11,2","iPhone11,4","iPhone11,6","iPhone11,8","iPhone12,1","iPhone12,3","iPhone12,5","iPhone12,8"],f=0;f<n.length;f++)t.indexOf(n[f])>=0&&(r=5);for(var u=0;u<o.length;u++)t.indexOf(o[u])>=0&&(r=10);for(var h=0;h<a.length;h++)t.indexOf(a[h])>=0&&(r=20);for(var c=0;c<i.length;c++)t.indexOf(i[c])>=0&&(r=30)}else r=e.benchmarkLevel;return r<22}return!1},r.getTwoNodeXZLength=function(r,e,t){void 0===t&&(t=!1);var n=t?r.position.x:r.worldPosition.x,o=t?r.position.z:r.worldPosition.z,a=t?e.position.x:e.worldPosition.x,i=t?e.position.z:e.worldPosition.z;return this.getTwoPosXZLength(n,o,a,i)},r.getTwoPosXZLength=function(r,e,t,n){var o=r-t,a=e-n;return Math.sqrt(o*o+a*a)},r.distance=function(r,e,t){return Math.sqrt(r*r+e*e+t*t)},r.createRandomName=function(){for(var r="",e=0;e<Math.round(3*Math.random())+1;e++)r+=String.fromCharCode(Math.round(26*Math.random())+97),r+=String.fromCharCode(Math.round(20901*Math.random())+19968),Math.random()>.5&&(r=r.split("").reverse().join(""));return r},r.randomName=function(){var r=e(t().mark((function r(e){var n,o,c,s,g,d,l,m;return t().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,f.loadResType("data/names/names",i);case 2:if(n=r.sent,u!==h.I18_LANGUAGE.CHINESE){r.next=14;break}return o=n.json.firstnames,c=n.json.boyNames,s=n.json.girlNames,g="",g=0==e?c[Math.floor(a(0,1)*c.length)]:s[Math.floor(a(0,1)*s.length)],d=o[Math.floor(a(0,1)*o.length)],l=d+g,r.abrupt("return",l);case 14:return m=n.json.enNames,r.abrupt("return",m[Math.floor(a(0,1)*m.length)]);case 16:case"end":return r.stop()}}),r)})));return function(e){return r.apply(this,arguments)}}(),r}())||c);n._RF.pop()}}}));

System.register("chunks:///_virtual/VirtualInput.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(t){var n,r,e;return{setters:[function(t){n=t.createClass},function(t){r=t.cclegacy,e=t._decorator}],execute:function(){var i,u;r._RF.push({},"413e8PDqQBEP5MyyEc8E0Zx","VirtualInput",void 0);var c=e.ccclass;t("VirtualInput",c("VirtualInput")(((u=function(){function t(){}return n(t,null,[{key:"horizontal",get:function(){return this._horizontal},set:function(t){this._horizontal=t}},{key:"vertical",get:function(){return this._vertical},set:function(t){this._vertical=t}}]),t}())._horizontal=0,u._vertical=0,i=u))||i);r._RF.pop()}}}));

(function(r) {
  r('virtual:///prerequisite-imports/main', 'chunks:///_virtual/main'); 
})(function(mid, cid) {
    System.register(mid, [cid], function (_export, _context) {
    return {
        setters: [function(_m) {
            var _exportObj = {};

            for (var _key in _m) {
              if (_key !== "default" && _key !== "__esModule") _exportObj[_key] = _m[_key];
            }
      
            _export(_exportObj);
        }],
        execute: function () { }
    };
    });
});